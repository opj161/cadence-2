This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: **/*.log, **/cache/**, **/tmp/**, /node_modules, /.pnp, .pnp.js, /coverage, /.next/, /out/, /build, .DS_Store, *.pem, .vercel, *.tsbuildinfo, next-env.d.ts, .npm, .eslintcache, .svelte-kit/, **/.vitepress/dist, **/.vitepress/cache, *icon0.svg, vite.config.js.timestamp-*, src/app/icon0.svg, vite.config.ts.timestamp-*, !.env*, CHANGELOG.md
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
ARCHITECTURE.md
docs/codemirror-reference.md
docs/Dark_mode_-_Core_concepts_-_Tailwind_CSS.md
docs/Functions_and_directives_-_Core_concepts_-_Tailwind_CSS.md
docs/hyphen-webworkers-reference.md
docs/Installing_Tailwind_CSS_with_Vite_-_Tailwind_CSS.md
docs/react-codemirror-reference.md
docs/README.md
docs/Responsive_design_-_Core_concepts_-_Tailwind_CSS.md
docs/Styling_with_utility_classes_-_Core_concepts_-_Tailwind_CSS.md
docs/Theme_variables_-_Core_concepts_-_Tailwind_CSS.md
eslint.config.js
index.html
package.json
public/vite.svg
README.md
src/App.css
src/App.tsx
src/assets/react.svg
src/components/ErrorDisplay.tsx
src/components/LyricEditor.tsx
src/extensions/pasteHandler.ts
src/extensions/smartFormatting.ts
src/extensions/syllableDecorations.ts
src/extensions/syllableGutter.ts
src/index.css
src/main.tsx
src/types/index.ts
src/utils/workerManager.ts
src/workers/syllableProcessor.worker.ts
tsconfig.app.json
tsconfig.json
tsconfig.node.json
vite.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="ARCHITECTURE.md">
# Cadence - Application Architecture & Implementation Plan

## Executive Summary

**Cadence** is a specialized rich-text editor for songwriters that provides real-time rhythmic analysis and visual feedback on lyric structure. This document outlines the complete technical architecture, technology choices, and implementation strategy.

---

## 1. Technology Stack

### 1.1 Core Technologies

| Technology | Version | Purpose | Rationale |
|------------|---------|---------|-----------|
| **React** | ^18.3.1 | UI Framework | Modern, well-documented, excellent hooks API for state management |
| **TypeScript** | ^5.6.3 | Type Safety | Prevents bugs, improves DX, industry standard in 2024-2025 |
| **Vite** | ^6.0.3 | Build Tool | Lightning-fast HMR, ESM-first, excellent TypeScript support |
| **CodeMirror 6** | ^6.35.0 | Editor Core | Native gutter support, powerful decoration system, excellent performance |
| **hyphen** | ^1.10.6 | Syllable Detection | Industry-standard hyphenation using Liang's algorithm |

### 1.2 Supporting Libraries

```json
{
  "dependencies": {
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "@uiw/react-codemirror": "^4.23.5",
    "@codemirror/view": "^6.35.0",
    "@codemirror/state": "^6.4.1",
    "@codemirror/language": "^6.10.3",
    "hyphen": "^1.10.6"
  },
  "devDependencies": {
    "typescript": "^5.6.3",
    "vite": "^6.0.3",
    "@vitejs/plugin-react": "^4.3.4",
    "@types/hyphen": "^1.3.0",
    "@types/react": "^18.3.12",
    "@types/react-dom": "^18.3.1",
    "tailwindcss": "^3.4.17",
    "autoprefixer": "^10.4.20",
    "postcss": "^8.4.49"
  }
}
```

### 1.3 Why CodeMirror 6?

**Chosen over alternatives (ProseMirror, Monaco Editor, Slate) because:**

1. **Native Gutter Support**: Built-in, well-documented API for custom gutters with markers
2. **Powerful Decoration System**: Efficient for inline syllable markers without DOM manipulation
3. **Line-Based Model**: Perfect for per-line syllable counting in lyrics
4. **Performance**: Designed for large documents with efficient virtual scrolling
5. **Extensibility**: Clean plugin architecture for custom extensions
6. **Modern Architecture**: Functional, immutable state management aligns with React

**Why NOT ProseMirror?**
- Designed for structured documents (like Notion), adds unnecessary complexity
- No native gutter support - would require custom implementation
- Document schema model is overkill for simple line-based lyrics

**Why NOT Monaco Editor?**
- Heavyweight (VS Code's editor), includes features we don't need
- Primarily for code editing, not prose
- Less flexible for custom UI requirements

---

## 2. Application Architecture

### 2.1 Component Hierarchy

```
App (Root)
│
├── LyricEditor (Main Container)
│   │
│   ├── CodeMirrorEditor (Editor Wrapper Component)
│   │   │
│   │   ├── Extensions:
│   │   │   ├── SyllableGutterExtension
│   │   │   ├── SyllableDecorationsExtension
│   │   │   ├── SmartFormattingExtension
│   │   │   ├── ActiveLineHighlightExtension
│   │   │   └── PasteHandlerExtension
│   │   │
│   │   └── Event Handlers
│   │
│   └── ErrorDisplay (Processing Warnings)
│
├── SyllableProcessor (Web Worker)
│   └── Hyphen Library Integration
│
└── Utilities & Types
    ├── debounce.ts
    ├── syllableCounter.ts
    └── types.ts
```

### 2.2 Data Flow

```
┌─────────────┐
│ User Types  │
└──────┬──────┘
       │
       ▼
┌──────────────────┐
│ Editor Updates   │◄── CodeMirror State Management
└──────┬───────────┘
       │
       ▼
┌──────────────────┐
│ Debounce (300ms) │◄── Prevents excessive processing
└──────┬───────────┘
       │
       ▼
┌──────────────────────┐
│ Extract Line Content │
└──────┬───────────────┘
       │
       ▼
┌─────────────────────────┐
│ Post to Web Worker      │◄── Non-blocking processing
│ (SyllableProcessor)     │
└──────┬──────────────────┘
       │
       ▼
┌──────────────────────────┐
│ hyphen/en processes text │◄── Returns hyphenated string
└──────┬───────────────────┘
       │
       ▼
┌──────────────────────────┐
│ Count soft hyphens       │◄── syllables = hyphens + 1
│ Return syllable data     │
└──────┬───────────────────┘
       │
       ▼
┌──────────────────────────┐
│ Main thread receives     │
│ syllable counts + errors │
└──────┬───────────────────┘
       │
       ▼
┌──────────────────────────┐
│ Update Editor Extensions:│
│ • Gutter markers         │
│ • Inline decorations     │
│ • Error warnings         │
└──────────────────────────┘
```

---

## 3. Core Feature Implementation

### 3.1 Syllable Counting System

#### Algorithm
```typescript
// Uses Franklin M. Liang's hyphenation algorithm via hyphen package
import { hyphenate } from "hyphen/en";

async function countSyllables(text: string): Promise<number> {
  // Returns string with soft hyphens (\u00AD) at syllable breaks
  const hyphenated = await hyphenate(text);
  
  // Count soft hyphens + 1 = syllable count
  const softHyphens = (hyphenated.match(/\u00AD/g) || []).length;
  return softHyphens + 1;
}

// Example:
// "beautiful" → "beau\u00ADti\u00ADful" → 3 syllables
```

#### Web Worker Implementation
```typescript
// workers/syllableProcessor.worker.ts
import { hyphenate } from "hyphen/en";

interface ProcessRequest {
  lines: Array<{ lineNumber: number; text: string }>;
}

interface ProcessResponse {
  results: Array<{ lineNumber: number; syllables: number; hyphenated: string }>;
  errors: Array<{ lineNumber: number; word: string }>;
}

self.onmessage = async (e: MessageEvent<ProcessRequest>) => {
  const { lines } = e.data;
  const results = [];
  const errors = [];

  for (const { lineNumber, text } of lines) {
    try {
      const hyphenated = await hyphenate(text);
      const syllables = (hyphenated.match(/\u00AD/g) || []).length + 1;
      results.push({ lineNumber, syllables, hyphenated });
    } catch (error) {
      errors.push({ lineNumber, word: text });
    }
  }

  self.postMessage({ results, errors });
};
```

### 3.2 Gutter Display

#### Implementation with CodeMirror
```typescript
// extensions/syllableGutter.ts
import { gutter, GutterMarker } from "@codemirror/view";
import { StateField, StateEffect } from "@codemirror/state";

// State effect for updating syllable counts
const setSyllableCounts = StateEffect.define<Map<number, number>>();

// State field to store syllable counts
const syllableCountsField = StateField.define<Map<number, number>>({
  create: () => new Map(),
  update: (counts, tr) => {
    for (let effect of tr.effects) {
      if (effect.is(setSyllableCounts)) {
        return effect.value;
      }
    }
    return counts;
  }
});

// Custom gutter marker
class SyllableMarker extends GutterMarker {
  constructor(private count: number, private isActive: boolean) {
    super();
  }

  toDOM() {
    const span = document.createElement("span");
    span.textContent = String(this.count);
    span.className = this.isActive 
      ? "syllable-count syllable-count-active" 
      : "syllable-count";
    return span;
  }

  eq(other: SyllableMarker) {
    return this.count === other.count && this.isActive === other.isActive;
  }
}

// Gutter extension
export const syllableGutter = [
  syllableCountsField,
  gutter({
    class: "cm-syllable-gutter",
    lineMarker: (view, line) => {
      const counts = view.state.field(syllableCountsField);
      const lineNumber = view.state.doc.lineAt(line.from).number;
      const count = counts.get(lineNumber);
      
      if (count === undefined) return null;
      
      // Check if this is the active line
      const isActive = view.state.selection.main.head >= line.from 
        && view.state.selection.main.head <= line.to;
      
      return new SyllableMarker(count, isActive);
    },
    initialSpacer: () => new SyllableMarker(99, false) // Reserve space for 2 digits
  })
];
```

### 3.3 Inline Syllable Visualization

```typescript
// extensions/syllableDecorations.ts
import { Decoration, DecorationSet, EditorView } from "@codemirror/view";
import { StateField, StateEffect } from "@codemirror/state";

const syllableSeparatorMark = Decoration.mark({
  class: "cm-syllable-separator",
  // CSS will add: content: "·" or "‧" 
});

const setSyllableDecorations = StateEffect.define<DecorationSet>();

const syllableDecorationsField = StateField.define<DecorationSet>({
  create: () => Decoration.none,
  update: (decorations, tr) => {
    decorations = decorations.map(tr.changes);
    for (let effect of tr.effects) {
      if (effect.is(setSyllableDecorations)) {
        return effect.value;
      }
    }
    return decorations;
  },
  provide: f => EditorView.decorations.from(f)
});

// Function to create decorations from hyphenated text
function createSyllableDecorations(
  view: EditorView,
  hyphenatedLines: Map<number, string>
): DecorationSet {
  const decorations = [];
  
  for (const [lineNumber, hyphenatedText] of hyphenatedLines) {
    const line = view.state.doc.line(lineNumber);
    let pos = 0;
    
    for (let i = 0; i < hyphenatedText.length; i++) {
      if (hyphenatedText[i] === '\u00AD') {
        // Add decoration just after this position
        decorations.push(syllableSeparatorMark.range(line.from + pos));
      } else {
        pos++;
      }
    }
  }
  
  return Decoration.set(decorations, true);
}

export const syllableDecorations = [syllableDecorationsField];
```

### 3.4 Smart Formatting

```typescript
// extensions/smartFormatting.ts
import { Decoration, ViewUpdate, MatchDecorator } from "@codemirror/view";
import { ViewPlugin, DecorationSet } from "@codemirror/view";

// Section headers: [Verse 1], [Chorus], etc.
const sectionHeaderDecorator = new MatchDecorator({
  regexp: /^\[.*\]$/gm,
  decoration: Decoration.line({ class: "cm-section-header" })
});

// Chords: [G], [Am], [F#m7], etc.
const chordDecorator = new MatchDecorator({
  regexp: /\[[A-G][#b]?m?[0-9]?[^[\]]*\]/g,
  decoration: Decoration.mark({ class: "cm-chord" })
});

// Comments: # or //
const commentDecorator = new MatchDecorator({
  regexp: /^(#|\/\/).*$/gm,
  decoration: Decoration.line({ class: "cm-comment-line" })
});

export const smartFormatting = ViewPlugin.fromClass(class {
  decorations: DecorationSet;

  constructor(view: EditorView) {
    this.decorations = this.buildDecorations(view);
  }

  update(update: ViewUpdate) {
    if (update.docChanged || update.viewportChanged) {
      this.decorations = this.buildDecorations(update.view);
    }
  }

  buildDecorations(view: EditorView): DecorationSet {
    const builder = [];
    
    builder.push(...sectionHeaderDecorator.createDeco(view));
    builder.push(...chordDecorator.createDeco(view));
    builder.push(...commentDecorator.createDeco(view));
    
    return Decoration.set(builder, true);
  }
}, {
  decorations: v => v.decorations
});
```

### 3.5 Intelligent Paste Handling

```typescript
// extensions/pasteHandler.ts
import { EditorView } from "@codemirror/view";

export const pasteHandler = EditorView.domEventHandlers({
  paste(event, view) {
    const text = event.clipboardData?.getData("text/plain");
    
    if (!text) return false;
    
    // Check if text contains multiple lines
    const lines = text.split(/\r?\n/);
    
    if (lines.length > 1) {
      event.preventDefault();
      
      // Insert each line as a separate paragraph
      const { from } = view.state.selection.main;
      const formattedText = lines.join('\n');
      
      view.dispatch({
        changes: { from, insert: formattedText },
        selection: { anchor: from + formattedText.length }
      });
      
      return true;
    }
    
    return false; // Let default handler process single-line paste
  }
});
```

---

## 4. Project Structure

```
cadence-2/
├── public/
│   └── (static assets)
│
├── src/
│   ├── components/
│   │   ├── LyricEditor.tsx          # Main editor container
│   │   ├── CodeMirrorEditor.tsx     # CodeMirror wrapper
│   │   └── ErrorDisplay.tsx         # Shows processing warnings
│   │
│   ├── extensions/
│   │   ├── syllableGutter.ts        # Gutter with syllable counts
│   │   ├── syllableDecorations.ts   # Inline syllable markers
│   │   ├── smartFormatting.ts       # Auto-format sections/chords/comments
│   │   ├── activeLineHighlight.ts   # Highlight current line
│   │   └── pasteHandler.ts          # Multi-line paste handling
│   │
│   ├── workers/
│   │   └── syllableProcessor.worker.ts  # Web Worker for syllable processing
│   │
│   ├── utils/
│   │   ├── debounce.ts              # Debounce utility
│   │   ├── syllableCounter.ts       # Syllable counting logic
│   │   └── workerManager.ts         # Web Worker management
│   │
│   ├── types/
│   │   └── index.ts                 # TypeScript type definitions
│   │
│   ├── styles/
│   │   ├── editor.css               # Editor-specific styles
│   │   └── global.css               # Global styles
│   │
│   ├── App.tsx                      # Root component
│   ├── main.tsx                     # Entry point
│   └── vite-env.d.ts                # Vite type definitions
│
├── index.html
├── package.json
├── tsconfig.json
├── tsconfig.node.json
├── vite.config.ts
├── tailwind.config.js
├── postcss.config.js
├── .gitignore
├── README.md
└── ARCHITECTURE.md (this file)
```

---

## 5. Implementation Phases

### Phase 1: Project Setup (Day 1)
- [ ] Initialize Vite + React + TypeScript project (npm create vite@latest . -- --template react-ts)
- [ ] Install dependencies (CodeMirror, hyphen, Tailwind)
- [ ] Configure Vite for Web Workers
- [ ] Set up Tailwind CSS
- [ ] Create basic project structure

### Phase 2: Core Editor (Day 1-2)
- [ ] Implement basic CodeMirror wrapper component
- [ ] Add basic styling and layout
- [ ] Test text input and state management

### Phase 3: Syllable Processing (Day 2-3)
- [ ] Implement Web Worker for syllable processing
- [ ] Integrate hyphen/en package
- [ ] Create syllable counting logic
- [ ] Add debouncing for text changes
- [ ] Test with various lyric samples

### Phase 4: Gutter Display (Day 3-4)
- [ ] Create syllable gutter extension
- [ ] Implement gutter marker rendering
- [ ] Add active line highlighting in gutter
- [ ] Style gutter appropriately

### Phase 5: Inline Syllable Markers (Day 4-5)
- [ ] Create syllable decoration extension
- [ ] Implement decoration placement logic
- [ ] Add subtle visual markers (dots/hyphens)
- [ ] Test with various word lengths

### Phase 6: Smart Formatting (Day 5-6)
- [ ] Implement section header detection
- [ ] Add chord annotation styling
- [ ] Create comment line formatting
- [ ] Style all formatting patterns

### Phase 7: Enhanced Features (Day 6-7)
- [ ] Implement intelligent paste handler
- [ ] Add error display component
- [ ] Create loading/processing indicators
- [ ] Add keyboard shortcuts

### Phase 8: Polish & Testing (Day 7-8)
- [ ] Refine all styling
- [ ] Performance optimization
- [ ] Cross-browser testing
- [ ] User experience refinements
- [ ] Documentation

---

## 6. Styling Strategy

### 6.1 Color Palette

```css
:root {
  /* Primary Colors */
  --color-bg: #1e1e1e;              /* Dark background */
  --color-editor-bg: #252526;       /* Editor background */
  --color-gutter-bg: #1e1e1e;       /* Gutter background */
  --color-text: #d4d4d4;            /* Primary text */
  --color-text-dim: #858585;        /* Secondary text */
  
  /* Accent Colors */
  --color-accent: #007acc;          /* Links, active elements */
  --color-success: #4ec9b0;         /* Success states */
  --color-warning: #dcdcaa;         /* Warnings */
  --color-error: #f48771;           /* Errors */
  
  /* Feature Colors */
  --color-syllable-count: #569cd6;  /* Syllable count in gutter */
  --color-syllable-active: #4ec9b0; /* Active line syllable count */
  --color-section-header: #c586c0;  /* [Verse 1], [Chorus] */
  --color-chord: #dcdcaa;           /* [G], [Am] */
  --color-comment: #6a9955;         /* # or // comments */
  --color-syllable-marker: #505050; /* Inline syllable dots */
  
  /* UI Elements */
  --color-line-highlight: #2a2a2a;  /* Active line background */
  --color-border: #3e3e3e;          /* Borders */
}
```

### 6.2 Typography

```css
/* Editor Font */
.cm-editor {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 
               Roboto, sans-serif;
  font-size: 16px;
  line-height: 1.8;
  letter-spacing: 0.01em;
}

/* Gutter Font */
.cm-syllable-gutter {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-size: 13px;
  font-weight: 500;
}

/* Section Headers */
.cm-section-header {
  font-weight: 700;
  font-size: 18px;
  letter-spacing: 0.02em;
}
```

---

## 7. Performance Considerations

### 7.1 Optimization Strategies

1. **Debouncing**: 300ms delay on text changes before processing
2. **Web Worker**: All syllable processing off main thread
3. **Viewport-Only Processing**: Only process visible lines initially
4. **Incremental Updates**: Only reprocess changed lines
5. **Memoization**: Cache syllable results for unchanged lines
6. **Virtual Scrolling**: CodeMirror handles this automatically

### 7.2 Performance Targets

- **Initial Load**: < 2 seconds
- **Time to Interactive**: < 3 seconds
- **Text Input Lag**: < 16ms (60fps)
- **Syllable Processing**: < 500ms for 100 lines
- **Memory Usage**: < 100MB for 1000 line document

---

## 8. Browser Support

### Target Browsers
- Chrome/Edge 90+
- Firefox 88+
- Safari 14+

### Required Features
- ES2020+ (async/await, optional chaining, etc.)
- Web Workers
- CSS Grid & Flexbox
- Custom Properties (CSS Variables)

---

## 9. Testing Strategy

### 9.1 Unit Tests
- Syllable counting accuracy
- Debounce utility
- Pattern matching for formatting

### 9.2 Integration Tests
- Editor state management
- Web Worker communication
- Extension interactions

### 9.3 E2E Tests
- Complete user workflows
- Paste handling
- Multi-line editing

### 9.4 Test Data
```
Sample lyrics for testing:
- Simple words (cat, dog, run)
- Complex words (beautiful, revolutionary)
- Numbers and symbols
- Empty lines
- Very long lines (> 100 characters)
- Special characters & Unicode
- Real song lyrics from public domain
```

---

## 10. Future Enhancements

### Phase 2 Features (Post-MVP)
- [ ] Export to various formats (PDF, TXT, HTML)
- [ ] Multiple language support (Spanish, German, etc.)
- [ ] Custom syllable pattern overrides
- [ ] Rhyme detection and highlighting
- [ ] Stress pattern analysis
- [ ] Collaborative editing
- [ ] Cloud sync (optional)
- [ ] Mobile-responsive version
- [ ] Dark/light theme toggle
- [ ] Custom color schemes

---

## 11. Security & Privacy

### Data Handling
- ✅ **All processing is local** - no data leaves the user's machine
- ✅ **No analytics or tracking**
- ✅ **No external API calls**
- ✅ **No user accounts required**
- ✅ **LocalStorage for preferences** (optional)

### Dependencies
- All dependencies are from trusted sources (npm)
- Regular security audits with `npm audit`
- Minimal dependency tree to reduce attack surface

---

## 12. Development Guidelines

### Code Style
- **TypeScript**: Strict mode enabled
- **Linting**: ESLint with React + TypeScript rules
- **Formatting**: Prettier with 2-space indentation
- **Naming**: camelCase for variables/functions, PascalCase for components

### Git Workflow
- Main branch: `main` (production-ready)
- Feature branches: `feature/feature-name`
- Conventional commits: `feat:`, `fix:`, `docs:`, etc.

### Documentation
- Inline JSDoc comments for complex functions
- README with setup instructions
- CHANGELOG for version tracking

---

## 13. Success Metrics

### User Experience
- User can see syllable counts within 500ms of typing
- No perceptible lag during typing
- Visual feedback is clear and non-intrusive
- Smart formatting works accurately 95%+ of the time

### Technical
- < 100KB bundle size (gzipped)
- < 100ms for syllable processing of typical line
- < 50ms paint time after state update
- 0 console errors in production

---

## Conclusion

This architecture provides a solid foundation for building **Cadence** - a modern, performant, and user-friendly songwriting tool. The tech stack is proven, the architecture is scalable, and the implementation plan is methodical.

**Key Strengths:**
- ✅ 100% local, no external dependencies
- ✅ Modern, maintainable codebase
- ✅ Excellent performance characteristics
- ✅ Extensible architecture for future features
- ✅ Great developer experience

**Next Steps:**
1. Review and approve architecture
2. Begin Phase 1: Project Setup
3. Iterate based on testing and feedback
</file>

<file path="docs/codemirror-reference.md">
# CodeMirror 6 API Reference

> Downloaded from Context7 on November 9, 2025
> 
> This document contains essential CodeMirror 6 documentation for building the Cadence application.

---

## Table of Contents

1. [Editor Setup](#editor-setup)
2. [Extensions & Configuration](#extensions--configuration)
3. [Gutters API](#gutters-api)
4. [Decorations API](#decorations-api)
5. [State Management](#state-management)
6. [View Plugins](#view-plugins)
7. [Facets](#facets)
8. [Event Handling](#event-handling)

---

## Editor Setup

### Minimal CodeMirror Editor Setup

Basic initialization of a CodeMirror 6 editor:

```javascript
import {EditorState} from "@codemirror/state"
import {EditorView, keymap} from "@codemirror/view"
import {defaultKeymap} from "@codemirror/commands"

let startState = EditorState.create({
  doc: "Hello World",
  extensions: [keymap.of(defaultKeymap)]
})

let view = new EditorView({
  state: startState,
  parent: document.body
})
```

### Editor with Basic Setup and JavaScript Support

```javascript
import {EditorView, basicSetup} from "codemirror"
import {javascript} from "@codemirror/lang-javascript"

let view = new EditorView({
  extensions: [basicSetup, javascript()],
  parent: document.body
})
```

### EditorViewConfig Interface

```typescript
interface EditorViewConfig extends EditorStateConfig {
    state?: EditorState
    parent?: Element | DocumentFragment
    root?: Document | ShadowRoot
    scrollTo?: StateEffect<any>
    dispatchTransactions?: (trs: readonly Transaction[], view: EditorView) => void
    dispatch?: (tr: Transaction, view: EditorView) => void
}
```

---

## Extensions & Configuration

### Extension Type Definition

```typescript
type Extension = {extension: Extension} | readonly Extension[]
```

Extensions can be nested arbitrarily deep and will be flattened during processing.

### Configuring Extensions with Compartments

Dynamically manage editor configurations like tab size using compartments:

```javascript
let tabSize = new Compartment

let view = new EditorView({
  extensions: [
    // ...
    tabSize.of(EditorState.tabSize.of(2))
  ],
  // ...
})

function setTabSize(size) {
  view.dispatch({
    effects: tabSize.reconfigure(EditorState.tabSize.of(size))
  })
}
```

### Extension Precedence

```javascript
import {keymap} from "@codemirror/view"
import {EditorState, Prec} from "@codemirror/state"

function dummyKeymap(tag) {
  return keymap.of([{ 
    key: "Ctrl-Space",
    run() { console.log(tag); return true }
  }])
}

let state = EditorState.create({extensions: [
  dummyKeymap("A"),
  dummyKeymap("B"),
  Prec.high(dummyKeymap("C"))  // This will be handled first
]})
```

---

## Gutters API

### Line Number Gutter

```typescript
function lineNumbers(config?: {
    formatNumber?: (lineNo: number, state: EditorState) => string,
    domEventHandlers?: { [key: string]: (view: EditorView, line: BlockInfo, event: Event) => boolean }
}): Extension
```

**Example:**
```javascript
import { lineNumbers } from "@codemirror/view"

const view = new EditorView({
  extensions: [
    lineNumbers({
      formatNumber: (lineNo) => `${lineNo}:`,
      domEventHandlers: {
        click: (view, line, event) => {
          console.log(`Line ${line.number} clicked`);
          return false;
        }
      }
    })
  ]
})
```

### Custom Gutter Definition

```typescript
function gutter(config: {
    class?: string,
    renderEmptyElements?: boolean,
    markers?: (view: EditorView) => RangeSet<GutterMarker> | readonly RangeSet<GutterMarker>[],
    lineMarker?: (view: EditorView, line: BlockInfo, otherMarkers: readonly GutterMarker[]) => GutterMarker | null,
    widgetMarker?: (view: EditorView, widget: WidgetType, block: BlockInfo) => GutterMarker | null,
    lineMarkerChange?: (update: ViewUpdate) => boolean,
    initialSpacer?: (view: EditorView) => GutterMarker,
    updateSpacer?: (spacer: GutterMarker, update: ViewUpdate) => GutterMarker,
    domEventHandlers?: { [key: string]: (view: EditorView, line: BlockInfo, event: Event) => boolean },
    side?: "before" | "after"
}): Extension
```

### GutterMarker Class

```typescript
abstract class GutterMarker extends RangeValue {
    eq(other: GutterMarker): boolean
    toDOM?(view: EditorView): Node
    elementClass: string
    destroy(dom: Node)
}
```

**Custom Marker Example:**
```javascript
class SyllableMarker extends GutterMarker {
  constructor(count, isActive) {
    super();
    this.count = count;
    this.isActive = isActive;
  }

  toDOM() {
    const span = document.createElement("span");
    span.textContent = String(this.count);
    span.className = this.isActive 
      ? "syllable-count syllable-count-active" 
      : "syllable-count";
    return span;
  }

  eq(other) {
    return this.count === other.count && this.isActive === other.isActive;
  }
}
```

### Highlight Active Line Gutter

```typescript
function highlightActiveLineGutter(): Extension
```

Returns an extension that adds a `cm-activeLineGutter` class to all gutter elements on the active line.

### Gutter Configuration

```typescript
function gutters(config?: { fixed?: boolean }): Extension
```

The gutter-drawing plugin is automatically enabled when you add a gutter. `fixed: true` (default) means gutters don't scroll with content.

### Gutter Facets

```typescript
static gutterLineClass: Facet<RangeSet<GutterMarker>>
static gutterWidgetClass: Facet<(view: EditorView, widget: WidgetType, block: BlockInfo) => GutterMarker | null>
static lineNumberMarkers: Facet<RangeSet<GutterMarker>>
static lineNumberWidgetMarker: Facet<(view: EditorView, widget: WidgetType, block: BlockInfo) => GutterMarker | null>
```

---

## Decorations API

### Decorations Facet

```typescript
static decorations: Facet<DecorationSet | fn(view: EditorView) → DecorationSet>
```

A facet that determines which decorations are shown in the view. Decorations can be provided directly or via a function.

### Managing Decorations with StateField

```javascript
import {StateField, StateEffect} from "@codemirror/state"
import {EditorView, Decoration} from "@codemirror/view"

// Effects can be attached to transactions to communicate with the extension
const addMarks = StateEffect.define()
const filterMarks = StateEffect.define()

// This value must be added to the set of extensions to enable this
const markField = StateField.define({
  // Start with an empty set of decorations
  create() { return Decoration.none },
  // This is called whenever the editor updates—it computes the new set
  update(value, tr) {
    // Move the decorations to account for document changes
    value = value.map(tr.changes)
    // If this transaction adds or removes decorations, apply those changes
    for (let effect of tr.effects) {
      if (effect.is(addMarks)) value = value.update({add: effect.value, sort: true})
      else if (effect.is(filterMarks)) value = value.update({filter: effect.value})
    }
    return value
  },
  // Indicate that this field provides a set of decorations
  provide: f => EditorView.decorations.from(f)
})
```

### Decoration Types

#### Mark Decoration

Creates a mark decoration that influences the styling of content within its range:

```javascript
Decoration.mark({
  inclusive: true,
  attributes: { class: "cm-bold" },
  tagName: "strong"
})
```

#### Widget Decoration

Creates a widget decoration, which inserts a DOM element at a specific position:

```javascript
Decoration.widget({
  widget: myWidgetInstance,
  side: 10,
  block: false
})
```

#### Replace Decoration

Creates a replace decoration, which replaces a range of content with a widget or simply hides it:

```javascript
Decoration.replace({
  widget: myWidgetInstance,
  inclusive: true,
  block: true
})
```

#### Line Decoration

Creates a line decoration that adds DOM attributes to the line:

```javascript
Decoration.line({
  attributes: { class: "cm-error-line" }
})
```

### MatchDecorator

Helper class for creating and updating decorations based on pattern matching:

```typescript
class MatchDecorator {
  createDeco(view: EditorView): RangeSet<Decoration>
  updateDeco(update: ViewUpdate, deco: DecorationSet): DecorationSet
}
```

**Example Usage:**
```javascript
const myDecorator = new MatchDecorator({
  regexp: /\b(TODO|FIXME)\b/g,
  decoration: Decoration.mark({ class: "cm-keyword-highlight" })
});

// In a view plugin:
let decorations = myDecorator.createDeco(editorView);
// On update:
decorations = myDecorator.updateDeco(update, decorations);
```

### Adding Decorations Example

```javascript
const strikeMark = Decoration.mark({
  attributes: {style: "text-decoration: line-through"}
})

view.dispatch({
  effects: addMarks.of([strikeMark.range(1, 4)])
})
```

---

## State Management

### EditorState Creation

```typescript
static create(config?: EditorStateConfig): EditorState
```

### Creating State with Selections

```javascript
import {EditorState, EditorSelection} from "@codemirror/state"

let state = EditorState.create({
  doc: "hello",
  selection: EditorSelection.create([
    EditorSelection.range(0, 4),
    EditorSelection.cursor(5)
  ]),
  extensions: EditorState.allowMultipleSelections.of(true)
})
console.log(state.selection.ranges.length) // 2
```

### Dispatching Transactions

```javascript
// Modify document content
view.dispatch({ 
  changes: {from: 0, to: view.state.doc.length, insert: text} 
})

// Modify selection
view.dispatch({
  selection: {anchor: pos}
})

view.dispatch({
  selection: {anchor, head}
})

view.dispatch({ 
  selection: EditorSelection.create(ranges) 
})
```

### State Update with changeByRange

```javascript
let state = EditorState.create({doc: "abcd", selection: {anchor: 1, head: 3}})

// Upcase the selection
let tr = state.update(state.changeByRange(range => {
  let upper = state.sliceDoc(range.from, range.to).toUpperCase()
  return {
    changes: {from: range.from, to: range.to, insert: upper},
    range: EditorSelection.range(range.from, range.from + upper.length)
  }
}))
console.log(tr.state.doc.toString()) // "aBCd"
```

### StateField

```typescript
StateField.define<Value>({
  create: (state: EditorState) => Value,
  update: (value: Value, transaction: Transaction) => Value,
  provide?: (field: StateField<Value>) => Extension
})
```

### State Commands

```typescript
type StateCommand = fn(
  target: {state: EditorState, dispatch: fn(transaction: Transaction)}
) → boolean
```

---

## View Plugins

### Define View Plugin with Constructor Function

```typescript
static define<V extends PluginValue, Arg = undefined>(
  create: fn(view: EditorView, arg: Arg) → V,
  spec?: PluginSpec<V>
) → ViewPlugin<V, Arg>
```

### Define View Plugin from Class

```typescript
static fromClass<V extends PluginValue, Arg = undefined>(
  cls: {new (view: EditorView, arg: Arg) → V},
  spec?: PluginSpec<V>
) → ViewPlugin<V, Arg>
```

### View Plugin Example

```javascript
import {ViewPlugin} from "@codemirror/view"

const docSizePlugin = ViewPlugin.fromClass(class {
  constructor(view) {
    this.dom = view.dom.appendChild(document.createElement("div"))
    this.dom.style.cssText =
      "position: absolute; inset-block-start: 2px; inset-inline-end: 5px"
    this.dom.textContent = view.state.doc.length
  }

  update(update) {
    if (update.docChanged)
      this.dom.textContent = update.state.doc.length
  }

  destroy() { 
    this.dom.remove() 
  }
})
```

### View Plugin with Decorations

```javascript
const myPlugin = ViewPlugin.fromClass(class {
  decorations: DecorationSet;

  constructor(view: EditorView) {
    this.decorations = this.buildDecorations(view);
  }

  update(update: ViewUpdate) {
    if (update.docChanged || update.viewportChanged) {
      this.decorations = this.buildDecorations(update.view);
    }
  }

  buildDecorations(view: EditorView): DecorationSet {
    const builder = [];
    // Build decoration set...
    return Decoration.set(builder, true);
  }
}, {
  decorations: v => v.decorations
});
```

---

## Facets

### Facet Definition

```typescript
static define<Input, Output = readonly Input[]>(config?: {
  combine?: fn(value: readonly Input[]) → Output,
  compare?: fn(a: Output, b: Output) → boolean,
  compareInput?: fn(a: Input, b: Input) → boolean,
  static?: boolean,
  enables?: Extension | fn(self: Facet<Input, Output>) → Extension
}): Facet<Input, Output>
```

### Facet Methods

```typescript
// Get a facet reader
reader(): FacetReader<Output>

// Add value to facet
of(value: Input): Extension

// Compute value from state
compute(
  deps: readonly (StateField<any> | "doc" | "selection" | FacetReader<any>)[], 
  get: fn(state: EditorState) => Input
): Extension

// Compute multiple values from state
computeN(
  deps: readonly (StateField<any> | "doc" | "selection" | FacetReader<any>)[], 
  get: fn(state: EditorState) => readonly Input[]
): Extension

// Get value from state field
from<T extends Input>(field: StateField<T>): Extension
from<T>(field: StateField<T>, get: fn(value: T) => Input): Extension
```

### Built-in Facets

```typescript
// State facets
EditorState.tabSize: Facet<number, number>
EditorState.lineSeparator: Facet<string, string | undefined>
EditorState.readOnly: Facet<boolean, boolean>
EditorState.allowMultipleSelections: Facet<boolean, boolean>
EditorState.phrases: Facet<Object<string>>
EditorState.languageData: Facet<fn(state, pos, side) -> readonly Object<any>[]>
EditorState.changeFilter: Facet<fn(tr: Transaction) -> boolean | readonly number[]>
EditorState.transactionFilter: Facet<fn(tr: Transaction) -> TransactionSpec | readonly TransactionSpec[]>
EditorState.transactionExtender: Facet<fn(tr: Transaction) -> Pick<TransactionSpec, "effects" | "annotations"> | null>

// View facets
EditorView.decorations: Facet<DecorationSet | fn(view: EditorView) => DecorationSet>
EditorView.styleModule: Facet<StyleModule>
EditorView.updateListener: Facet<fn(update: ViewUpdate)>
EditorView.editable: Facet<boolean>
```

---

## Event Handling

### DOM Event Handlers

```typescript
static domEventHandlers(handlers: DOMEventHandlers<any>): Extension
```

**Example:**
```javascript
import {EditorView} from "@codemirror/view";

const handlers = {
  click(event, view) {
    console.log("Editor clicked!", event);
    return false; // Return true to prevent default
  },
  keydown(event, view) {
    if (event.key === "Enter" && event.ctrlKey) {
      // Handle Ctrl+Enter
      return true;
    }
    return false;
  }
};

const view = new EditorView({
  extensions: [EditorView.domEventHandlers(handlers)]
});
```

### DOM Event Observers

For consistently called event handlers even if other handlers processed them:

```javascript
const myEventObserver = EditorView.domEventObservers({
  click(view, event) {
    console.log("Click observed");
    // This will always be called
  }
});

const myPlugin = ViewPlugin.fromClass(class {
  constructor(view) {
    this.view = view;
  }
}, {
  eventObservers: myEventObserver
});
```

### Update Listener

```typescript
EditorView.updateListener.of((update: ViewUpdate) => {
  if (update.docChanged) {
    console.log("Document changed");
  }
  if (update.selectionSet) {
    console.log("Selection changed");
  }
})
```

---

## Editor View Methods

### Common Methods

```typescript
// Get screen coordinates at document position
coordsForChar(pos: number): Rect | null

// Focus management
hasFocus: boolean
focus(): void

// Set tab focus mode
setTabFocusMode(to?: boolean | number): void

// Update root
setRoot(root: Document | ShadowRoot): void

// Cleanup
destroy(): void
```

### Properties

```typescript
defaultCharacterWidth: number
defaultLineHeight: number
textDirection: Direction
lineWrapping: boolean
composing: boolean  // IME composition status
```

---

## Useful Extensions

### Scroll Past End

```typescript
scrollPastEnd(): Extension
```

Ensures all lines can be scrolled to the top by adding bottom margin.

### Drop Cursor

```typescript
dropCursor(): Extension
```

Adds a visual cursor at the drop position when dragging content.

### Placeholder

```javascript
import { placeholder } from "@codemirror/view";

const editor = new EditorView({
  extensions: [placeholder("Enter your text here...")]
});
```

### Draw Selection

```javascript
import { drawSelection } from "@codemirror/view";

const editor = new EditorView({
  extensions: [drawSelection()]
});
```

---

## Theming

### Base Theme

```javascript
EditorView.baseTheme({
  '&dark .first-line': { backgroundColor: 'red' },
  '&light .first-line': { backgroundColor: 'red' },
  '.cm-content': { fontFamily: 'monospace' }
})
```

### Custom Theme Extension

```javascript
const myTheme = EditorView.theme({
  '&': { height: '400px' },
  '.cm-scroller': { overflow: 'auto' },
  '.cm-content': { padding: '10px' },
  '&.cm-focused .cm-cursor': { borderLeftColor: '#0e9' }
}, { dark: true })
```

---

## DOM Structure

```html
<div class="cm-editor [theme scope classes]">
  <div class="cm-scroller">
    <div class="cm-content" contenteditable="true">
      <div class="cm-line">Content goes here</div>
      <div class="cm-line">...</div>
    </div>
  </div>
</div>
```

---

## Best Practices

1. **Use StateFields for storing state** - Don't store mutable state outside the editor state
2. **Use Effects for communication** - Define StateEffects for updating extensions
3. **Provide decorations efficiently** - Use the provide option in StateField
4. **Handle document changes** - Always map decorations/positions when document changes
5. **Use compartments for dynamic config** - Reconfigure extensions without recreating the editor
6. **Avoid accessing Transaction.state** in filters - Can cause infinite loops
7. **Clean up in destroy()** - Always remove DOM elements and listeners in view plugin destroy
8. **Use MatchDecorator for patterns** - Efficient for regex-based decorations
9. **Debounce expensive operations** - Don't run heavy computations on every keystroke
10. **Test with large documents** - Ensure performance with documents > 1000 lines

---

## Common Patterns for Cadence

### Pattern 1: Custom Gutter with State

```javascript
const syllableCountEffect = StateEffect.define()

const syllableCountField = StateField.define({
  create: () => new Map(),
  update: (counts, tr) => {
    for (let effect of tr.effects) {
      if (effect.is(syllableCountEffect)) {
        return effect.value;
      }
    }
    return counts;
  }
})

const syllableGutter = gutter({
  class: "cm-syllable-gutter",
  lineMarker: (view, line) => {
    const counts = view.state.field(syllableCountField);
    const lineNumber = view.state.doc.lineAt(line.from).number;
    const count = counts.get(lineNumber);
    if (!count) return null;
    return new SyllableMarker(count);
  }
})
```

### Pattern 2: Decorations with Pattern Matching

```javascript
const sectionHeaderDecorator = new MatchDecorator({
  regexp: /^\[.*\]$/gm,
  decoration: Decoration.line({ class: "cm-section-header" })
});

const formattingPlugin = ViewPlugin.fromClass(class {
  decorations: DecorationSet;

  constructor(view: EditorView) {
    this.decorations = sectionHeaderDecorator.createDeco(view);
  }

  update(update: ViewUpdate) {
    if (update.docChanged || update.viewportChanged) {
      this.decorations = sectionHeaderDecorator.updateDeco(update, this.decorations);
    }
  }
}, {
  decorations: v => v.decorations
});
```

### Pattern 3: Custom Paste Handler

```javascript
const pasteHandler = EditorView.domEventHandlers({
  paste(event, view) {
    const text = event.clipboardData?.getData("text/plain");
    if (!text) return false;
    
    const lines = text.split(/\r?\n/);
    if (lines.length > 1) {
      event.preventDefault();
      const { from } = view.state.selection.main;
      view.dispatch({
        changes: { from, insert: lines.join('\n') }
      });
      return true;
    }
    return false;
  }
});
```

---

**End of CodeMirror Reference Document**
</file>

<file path="docs/Dark_mode_-_Core_concepts_-_Tailwind_CSS.md">
# Dark mode - Core concept

Using variants to style your site in dark mode.

## [Overview](#overview)

Now that dark mode is a first-class feature of many operating systems, it's becoming more and more common to design a dark version of your website to go along with the default design.

To make this as easy as possible, Tailwind includes a 
```
dark
```
 variant that lets you style your site differently when dark mode is enabled:

Light mode

Writes upside-down

The Zero Gravity Pen can be used to write in any orientation, including upside-down. It even works in outer space.

Dark mode

Writes upside-down

The Zero Gravity Pen can be used to write in any orientation, including upside-down. It even works in outer space.

```
<div class="bg-white dark:bg-gray-800 rounded-lg px-6 py-8 ring shadow-xl ring-gray-900/5">  <div>    <span class="inline-flex items-center justify-center rounded-md bg-indigo-500 p-2 shadow-lg">      <svg class="h-6 w-6 stroke-white" ...>        <!-- ... -->      </svg>    </span>  </div>  <h3 class="text-gray-900 dark:text-white mt-5 text-base font-medium tracking-tight ">Writes upside-down</h3>  <p class="text-gray-500 dark:text-gray-400 mt-2 text-sm ">    The Zero Gravity Pen can be used to write in any orientation, including upside-down. It even works in outer space.  </p></div>
```

By default this uses the 
```
prefers-color-scheme
```
 CSS media feature, but you can also build sites that support [toggling dark mode manually](#toggling-dark-mode-manually) by overriding the dark variant.

## [Toggling dark mode manually](#toggling-dark-mode-manually)

If you want your dark theme to be driven by a CSS selector instead of the 
```
prefers-color-scheme
```
 media query, override the 
```
dark
```
 variant to use your custom selector:

app.css

```
@import "tailwindcss";@custom-variant dark (&:where(.dark, .dark *));
```

Now instead of 
```
dark:*
```
 utilities being applied based on 
```
prefers-color-scheme
```
, they will be applied whenever the 
```
dark
```
 class is present earlier in the HTML tree:

HTML

```
<html class="dark">  <body>    <div class="bg-white dark:bg-black">      <!-- ... -->    </div>  </body></html>
```

How you add the 
```
dark
```
 class to the 
```
html
```
 element is up to you, but a common approach is to use a bit of JavaScript that updates the 
```
class
```
 attribute and syncs that preference to somewhere like 
```
localStorage
```
.

### [Using a data attribute](#using-a-data-attribute)

To use a data attribute instead of a class to activate dark mode, just override the 
```
dark
```
 variant with an attribute selector instead:

app.css

```
@import "tailwindcss";@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));
```

Now dark mode utilities will be applied whenever the 
```
data-theme
```
 attribute is set to 
```
dark
```
 somewhere up the tree:

HTML

```
<htmldata-theme="dark">  <body>    <div class="bg-white dark:bg-black">      <!-- ... -->    </div>  </body></html>
```

### [With system theme support](#with-system-theme-support)

To build three-way theme toggles that support light mode, dark mode, and your system theme, use a custom dark mode selector and the [
```
window.matchMedia()
```
 API](https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia) to detect the system theme and update the 
```
html
```
 element when needed.

Here's a simple example of how you can support light mode, dark mode, as well as respecting the operating system preference:

spaghetti.js

```
// On page load or when changing themes, best to add inline in `head` to avoid FOUCdocument.documentElement.classList.toggle(  "dark",  localStorage.theme === "dark" ||    (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches),);// Whenever the user explicitly chooses light modelocalStorage.theme = "light";// Whenever the user explicitly chooses dark modelocalStorage.theme = "dark";// Whenever the user explicitly chooses to respect the OS preferencelocalStorage.removeItem("theme");
```

Again you can manage this however you like, even storing the preference server-side in a database and rendering the class on the server — it's totally up to you.
</file>

<file path="docs/Functions_and_directives_-_Core_concepts_-_Tailwind_CSS.md">
# Functions and directives - Core concept

A reference for the custom functions and directives Tailwind exposes to your CSS.

## [Directives](#directives)

Directives are custom Tailwind-specific [at-rules](https://developer.mozilla.org/en-US/docs/Web/CSS/At-rule) you can use in your CSS that offer special functionality for Tailwind CSS projects.

### [@import](#import-directive)

Use the 
```
@import
```
 directive to inline import CSS files, including Tailwind itself:

CSS

```
@import "tailwindcss";
```

### [@theme](#theme-directive)

Use the 
```
@theme
```
 directive to define your project's custom design tokens, like fonts, colors, and breakpoints:

CSS

```
@theme {  --font-display: "Satoshi", "sans-serif";  --breakpoint-3xl: 120rem;  --color-avocado-100: oklch(0.99 0 0);  --color-avocado-200: oklch(0.98 0.04 113.22);  --color-avocado-300: oklch(0.94 0.11 115.03);  --color-avocado-400: oklch(0.92 0.19 114.08);  --color-avocado-500: oklch(0.84 0.18 117.33);  --color-avocado-600: oklch(0.53 0.12 118.34);  --ease-fluid: cubic-bezier(0.3, 0, 0, 1);  --ease-snappy: cubic-bezier(0.2, 0, 0, 1);  /* ... */}
```

Learn more about customizing your theme in the [theme variables documentation](https://tailwindcss.com/docs/theme).

### [@source](#source-directive)

Use the 
```
@source
```
 directive to explicitly specify source files that aren't picked up by Tailwind's automatic content detection:

CSS

```
@source "../node_modules/@my-company/ui-lib";
```

Learn more about automatic content detection in the [detecting classes in source files documentation](https://tailwindcss.com/docs/detecting-classes-in-source-files).

### [@utility](#utility-directive)

Use the 
```
@utility
```
 directive to add custom utilities to your project that work with variants like 
```
hover
```
, 
```
focus
```
 and 
```
lg
```
:

CSS

```
@utility tab-4 {  tab-size: 4;}
```

Learn more about registering custom utilities in the [adding custom utilities documentation](https://tailwindcss.com/docs/adding-custom-styles#adding-custom-utilities).

### [@variant](#variant-directive)

Use the 
```
@variant
```
 directive to apply a Tailwind variant to styles in your CSS:

CSS

```
.my-element {  background: white;  @variant dark {    background: black;  }}
```

Learn more using variants in the [using variants documentation](https://tailwindcss.com/docs/adding-custom-styles#using-variants).

### [@custom-variant](#custom-variant-directive)

Use the 
```
@custom-variant
```
 directive to add a custom variant in your project:

CSS

```
@custom-variant theme-midnight (&:where([data-theme="midnight"] *));
```

This lets you write utilities 
```
theme-midnight:bg-black
```
 and 
```
theme-midnight:text-white
```
.

Learn more about adding custom variants in the [adding custom variants documentation](https://tailwindcss.com/docs/adding-custom-styles#adding-custom-variants).

### [@apply](#apply-directive)

Use the 
```
@apply
```
 directive to inline any existing utility classes into your own custom CSS:

CSS

```
.select2-dropdown {  @apply rounded-b-lg shadow-md;}.select2-search {  @apply rounded border border-gray-300;}.select2-results__group {  @apply text-lg font-bold text-gray-900;}
```

This is useful when you need to write custom CSS (like to override the styles in a third-party library) but still want to work with your design tokens and use the same syntax you’re used to using in your HTML.

### [@reference](#reference-directive)

If you want to use 
```
@apply
```
 or 
```
@variant
```
 in the 
```
<style>
```
 block of a Vue or Svelte component, or within CSS modules, you will need to import your theme variables, custom utilities, and custom variants to make those values available in that context.

To do this without duplicating any CSS in your output, use the 
```
@reference
```
 directive to import your main stylesheet for reference without actually including the styles:

Vue

```
<template>  <h1>Hello world!</h1></template><style>  @reference "../../app.css";  h1 {    @apply text-2xl font-bold text-red-500;  }</style>
```

If you’re just using the default theme with no customizations (e.g. by using things like 
```
@theme
```
, 
```
@custom-variant
```
, 
```
@plugin
```
, etc…), you can import 
```
tailwindcss
```
 directly:

Vue

```
<template>  <h1>Hello world!</h1></template><style>  @reference "tailwindcss";  h1 {    @apply text-2xl font-bold text-red-500;  }</style>
```

### [Subpath Imports](#subpath-imports)

When using the CLI, Vite, or PostCSS the directives 
```
@import
```
, 
```
@reference
```
, 
```
@plugin
```
, and 
```
@config
```
 all support [subpath imports](https://nodejs.org/api/packages.html#subpath-imports) which work similarly to bundler and TypeScript path aliases:

package.json

```
{  // ...  "imports": {    "#app.css": "./src/css/app.css"  }}
```

Vue

```
<template>  <h1>Hello world!</h1></template><style>  @reference "#app.css";  h1 {    @apply text-2xl font-bold text-red-500;  }</style>
```

## [Functions](#functions)

Tailwind provides the following build-time functions to make working with colors and the spacing scale easier.

### [\--alpha()](#alpha-function)

Use the 
```
--alpha()
```
 function to adjust the opacity of a color:

Input CSS

```
.my-element {  color: --alpha(var(--color-lime-300) / 50%);}
```

Compiled CSS

```
.my-element {  color: color-mix(in oklab, var(--color-lime-300) 50%, transparent);}
```

### [\--spacing()](#spacing-function)

Use the 
```
--spacing()
```
 function to generate a spacing value based on your theme:

Input CSS

```
.my-element {  margin: --spacing(4);}
```

Compiled CSS

```
.my-element {  margin: calc(var(--spacing) * 4);}
```

This can also be useful in arbitrary values, especially in combination with 
```
calc()
```
:

HTML

```
<div class="py-[calc(--spacing(4)-1px)]">  <!-- ... --></div>
```

## [Compatibility](#compatibility)

The following directives and functions exist solely for compatibility with Tailwind CSS v3.x.

The 
```
@config
```
 and 
```
@plugin
```
 directives may be used in conjunction with 
```
@theme
```
, 
```
@utility
```
, and other CSS-driven features. This can be used to incrementally move over your theme, custom configuration, utilities, variants, and presets to CSS. Things defined in CSS will be merged where possible and otherwise take precedence over those defined in configs, presets, and plugins.

### [@config](#config-directive)

Use the 
```
@config
```
 directive to load a legacy JavaScript-based configuration file:

CSS

```
@config "../../tailwind.config.js";
```

The 
```
corePlugins
```
, 
```
safelist
```
, and 
```
separator
```
 options from the JavaScript-based config are not supported in v4.0. To safelist utilities in v4 use [
```
@source inline()
```
](https://tailwindcss.com/docs/detecting-classes-in-source-files#safelisting-specific-utilities).

### [@plugin](#plugin-directive)

Use the 
```
@plugin
```
 directive to load a legacy JavaScript-based plugin:

CSS

```
@plugin "@tailwindcss/typography";
```

The 
```
@plugin
```
 directive accepts either a package name or a local path.

### [theme()](#theme-function)

Use the 
```
theme()
```
 function to access your Tailwind theme values using dot notation:

CSS

```
.my-element {  margin: theme(spacing.12);}
```

This function is deprecated, and we recommend [using CSS theme variables](https://tailwindcss.com/docs/theme#using-your-theme-variables) instead.
</file>

<file path="docs/hyphen-webworkers-reference.md">
# Hyphen Package & Web Workers Reference

> Documentation compiled on November 9, 2025
> 
> This document contains information about the hyphen npm package and Web Workers for the Cadence application.

---

## Table of Contents

1. [Hyphen Package](#hyphen-package)
2. [Web Workers API](#web-workers-api)
3. [Vite Web Worker Configuration](#vite-web-worker-configuration)
4. [TypeScript with Web Workers](#typescript-with-web-workers)

---

## Hyphen Package

The `hyphen` npm package (from the user requirements) provides hyphenation based on Franklin M. Liang's algorithm. It uses patterns from ctan.org to hyphenate text.

### Installation

```bash
npm install hyphen
npm install --save-dev @types/hyphen
```

### Basic Usage

#### Async API (Returns Promise)

```javascript
import { hyphenate } from "hyphen/en";

(async () => {
  const text = "A certain king had a beautiful garden";
  const result = await hyphenate(text);
  // result is "A cer\u00ADtain king had a beau\u00ADti\u00ADful garden"
})();
```

#### Sync API (Returns String)

```javascript
import { hyphenateSync as hyphenate } from "hyphen/en";

const text = "A certain king had a beautiful garden";
const result = hyphenate(text);
// result is "A cer\u00ADtain king had a beau\u00ADti\u00ADful garden"
```

### Soft Hyphen Character

The package inserts the soft hyphen character (`\u00AD`) at syllable boundaries. This is an invisible character that:
- Indicates where words can be broken for line wrapping
- Can be counted to determine syllable count
- **Syllable Count = Number of soft hyphens + 1**

### Example: Counting Syllables

```javascript
import { hyphenate } from "hyphen/en";

async function countSyllables(text) {
  const hyphenated = await hyphenate(text);
  // Count soft hyphens
  const softHyphens = (hyphenated.match(/\u00AD/g) || []).length;
  return softHyphens + 1;
}

// Examples:
// "cat" → "cat" → 0 hyphens → 1 syllable
// "beautiful" → "beau\u00ADti\u00ADful" → 2 hyphens → 3 syllables
// "revolutionary" → "rev\u00ADo\u00ADlu\u00ADtion\u00ADary" → 4 hyphens → 5 syllables
```

### Multilingual Support

```javascript
import { hyphenate as hyphenateEn } from "hyphen/en";
import { hyphenate as hyphenateDe } from "hyphen/de";

(async () => {
  const english = "A certain king had a beautiful garden";
  const englishResult = await hyphenateEn(english);
  
  const german = "Ein gewisser König hatte einen wunderschönen Garten";
  const germanResult = await hyphenateDe(german);
})();
```

### HTML Support

The processor automatically skips HTML tags:

```javascript
import { hyphenate } from "hyphen/en";

(async () => {
  const text = "<blockquote>A certain king had a beautiful garden</blockquote>";
  const result = await hyphenate(text);
  // result is "<blockquote>A cer\u00ADtain king had a beau\u00ADti\u00ADful garden</blockquote>"
})();
```

### Configuration Options

```typescript
interface HyphenateOptions {
  // Array of exception words with manual hyphenation
  exceptions?: string[];
  
  // Character to use for soft hyphen (default: \u00AD)
  hyphenChar?: string;
  
  // Minimum word length to hyphenate (default: 5)
  minWordLength?: number;
}
```

**Usage:**

```javascript
import { hyphenate } from "hyphen/en";

(async () => {
  const text = "A certain king had a beautiful garden";
  
  const result = await hyphenate(text, {
    hyphenChar: "-",  // Use visible hyphen instead of soft hyphen
    minWordLength: 6,  // Only hyphenate words with 6+ characters
    exceptions: ["present", "ta-ble"]  // Manual hyphenation
  });
})();
```

### Factory Function

Create a hyphenator with custom default options:

```javascript
import createHyphenator from "hyphen";
import patterns from "hyphen/patterns/en-us";

const hyphenate = createHyphenator(patterns, {
  async: true,
  exceptions: ["present", "ta-ble"],
  hyphenChar: "\u00AD",
  minWordLength: 5
});

// Now use it
const result = await hyphenate("beautiful garden");
```

### Available Languages

Check the [npm package documentation](https://www.npmjs.com/package/hyphen) for the full list of available language patterns.

---

## Web Workers API

### What are Web Workers?

Web Workers allow JavaScript to run in background threads, separate from the main UI thread. This prevents blocking the user interface during expensive computations.

### Basic Web Worker Pattern

#### Main Thread (main.ts)

```typescript
// Create worker
const worker = new Worker(
  new URL('./worker.ts', import.meta.url),
  { type: 'module' }
);

// Send message to worker
worker.postMessage({ 
  type: 'process',
  data: 'some data'
});

// Receive message from worker
worker.onmessage = (event) => {
  console.log('Received from worker:', event.data);
};

// Handle errors
worker.onerror = (error) => {
  console.error('Worker error:', error);
};

// Terminate worker when done
worker.terminate();
```

#### Worker Thread (worker.ts)

```typescript
// Listen for messages from main thread
self.onmessage = (event) => {
  const { type, data } = event.data;
  
  if (type === 'process') {
    // Do expensive computation
    const result = processData(data);
    
    // Send result back to main thread
    self.postMessage({ 
      type: 'result',
      data: result 
    });
  }
};

function processData(data: string): string {
  // Heavy computation here
  return data.toUpperCase();
}
```

### TypeScript Web Worker Pattern

#### Worker Type Definition (worker.types.ts)

```typescript
// Messages sent TO worker
export interface WorkerRequest {
  id: string;
  type: 'process' | 'cancel';
  data: any;
}

// Messages received FROM worker
export interface WorkerResponse {
  id: string;
  type: 'result' | 'error' | 'progress';
  data: any;
  error?: string;
}
```

#### Typed Worker (worker.ts)

```typescript
import type { WorkerRequest, WorkerResponse } from './worker.types';

self.onmessage = (event: MessageEvent<WorkerRequest>) => {
  const { id, type, data } = event.data;
  
  try {
    if (type === 'process') {
      const result = processData(data);
      
      const response: WorkerResponse = {
        id,
        type: 'result',
        data: result
      };
      
      self.postMessage(response);
    }
  } catch (error) {
    const response: WorkerResponse = {
      id,
      type: 'error',
      data: null,
      error: error instanceof Error ? error.message : 'Unknown error'
    };
    
    self.postMessage(response);
  }
};
```

#### Typed Main Thread

```typescript
import type { WorkerRequest, WorkerResponse } from './worker.types';

class WorkerManager {
  private worker: Worker;
  private pendingRequests = new Map<string, {
    resolve: (data: any) => void;
    reject: (error: any) => void;
  }>();

  constructor() {
    this.worker = new Worker(
      new URL('./worker.ts', import.meta.url),
      { type: 'module' }
    );
    
    this.worker.onmessage = this.handleMessage.bind(this);
    this.worker.onerror = this.handleError.bind(this);
  }

  private handleMessage(event: MessageEvent<WorkerResponse>) {
    const { id, type, data, error } = event.data;
    const pending = this.pendingRequests.get(id);
    
    if (!pending) return;
    
    if (type === 'result') {
      pending.resolve(data);
      this.pendingRequests.delete(id);
    } else if (type === 'error') {
      pending.reject(new Error(error));
      this.pendingRequests.delete(id);
    }
  }

  private handleError(error: ErrorEvent) {
    console.error('Worker error:', error);
  }

  async process(data: any): Promise<any> {
    return new Promise((resolve, reject) => {
      const id = crypto.randomUUID();
      
      this.pendingRequests.set(id, { resolve, reject });
      
      const request: WorkerRequest = {
        id,
        type: 'process',
        data
      };
      
      this.worker.postMessage(request);
    });
  }

  terminate() {
    this.worker.terminate();
  }
}

// Usage:
const workerManager = new WorkerManager();
const result = await workerManager.process('some data');
```

---

## Vite Web Worker Configuration

### Vite Native Support

Vite has built-in support for Web Workers. No special configuration needed!

### Creating Workers in Vite

#### Using Constructor + URL

```typescript
// Recommended approach
const worker = new Worker(
  new URL('./worker.ts', import.meta.url),
  { type: 'module' }
);
```

#### Using ?worker Suffix

```typescript
// Alternative: use ?worker suffix
import MyWorker from './worker?worker';

const worker = new MyWorker();
```

### Vite Configuration (vite.config.ts)

```typescript
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  
  // Optional: Worker configuration
  worker: {
    format: 'es',  // 'es' | 'iife'
    plugins: [],   // Additional plugins for workers
    rollupOptions: {
      // Rollup options for worker bundles
    }
  },
  
  // Ensure proper MIME types
  server: {
    headers: {
      'Cross-Origin-Embedder-Policy': 'require-corp',
      'Cross-Origin-Opener-Policy': 'same-origin'
    }
  }
});
```

### TypeScript Configuration for Workers

#### tsconfig.json

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["ES2020", "DOM", "WebWorker"],
    "module": "ESNext",
    "moduleResolution": "bundler",
    "strict": true,
    "skipLibCheck": true
  },
  "include": ["src/**/*.ts", "src/**/*.tsx"],
  "exclude": ["node_modules"]
}
```

#### Worker-specific tsconfig (optional)

If you want separate config for workers:

**tsconfig.worker.json:**
```json
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "lib": ["ES2020", "WebWorker"]
  },
  "include": ["src/**/*.worker.ts"]
}
```

---

## Cadence-Specific Implementation

### Syllable Processor Worker

#### syllableProcessor.worker.ts

```typescript
import { hyphenate } from "hyphen/en";

interface ProcessRequest {
  id: string;
  lines: Array<{ 
    lineNumber: number; 
    text: string;
  }>;
}

interface ProcessResponse {
  id: string;
  results: Array<{
    lineNumber: number;
    syllables: number;
    hyphenated: string;
  }>;
  errors: Array<{
    lineNumber: number;
    word: string;
  }>;
}

async function countSyllables(text: string): Promise<number> {
  if (!text.trim()) return 0;
  
  try {
    const hyphenated = await hyphenate(text);
    const softHyphens = (hyphenated.match(/\u00AD/g) || []).length;
    return softHyphens + 1;
  } catch {
    throw new Error(`Could not process: ${text}`);
  }
}

self.onmessage = async (event: MessageEvent<ProcessRequest>) => {
  const { id, lines } = event.data;
  const results = [];
  const errors = [];

  for (const { lineNumber, text } of lines) {
    try {
      const hyphenated = await hyphenate(text);
      const syllables = (hyphenated.match(/\u00AD/g) || []).length + 1;
      
      results.push({ lineNumber, syllables, hyphenated });
    } catch (error) {
      errors.push({ lineNumber, word: text });
    }
  }

  const response: ProcessResponse = {
    id,
    results,
    errors
  };

  self.postMessage(response);
};
```

#### Worker Manager (workerManager.ts)

```typescript
interface ProcessRequest {
  id: string;
  lines: Array<{ lineNumber: number; text: string }>;
}

interface ProcessResponse {
  id: string;
  results: Array<{
    lineNumber: number;
    syllables: number;
    hyphenated: string;
  }>;
  errors: Array<{
    lineNumber: number;
    word: string;
  }>;
}

export class SyllableWorkerManager {
  private worker: Worker;
  private pendingRequests = new Map<string, {
    resolve: (data: ProcessResponse) => void;
    reject: (error: any) => void;
  }>();

  constructor() {
    this.worker = new Worker(
      new URL('./syllableProcessor.worker.ts', import.meta.url),
      { type: 'module' }
    );
    
    this.worker.onmessage = this.handleMessage.bind(this);
    this.worker.onerror = this.handleError.bind(this);
  }

  private handleMessage(event: MessageEvent<ProcessResponse>) {
    const { id } = event.data;
    const pending = this.pendingRequests.get(id);
    
    if (pending) {
      pending.resolve(event.data);
      this.pendingRequests.delete(id);
    }
  }

  private handleError(error: ErrorEvent) {
    console.error('Worker error:', error);
    
    // Reject all pending requests
    this.pendingRequests.forEach(({ reject }) => {
      reject(error);
    });
    this.pendingRequests.clear();
  }

  async processLines(lines: Array<{ lineNumber: number; text: string }>): Promise<ProcessResponse> {
    return new Promise((resolve, reject) => {
      const id = crypto.randomUUID();
      
      this.pendingRequests.set(id, { resolve, reject });
      
      const request: ProcessRequest = { id, lines };
      this.worker.postMessage(request);
    });
  }

  terminate() {
    this.worker.terminate();
    this.pendingRequests.clear();
  }
}
```

#### Usage in React Component

```typescript
import { useEffect, useRef, useState } from 'react';
import { SyllableWorkerManager } from './utils/workerManager';

function LyricEditor() {
  const workerRef = useRef<SyllableWorkerManager>();
  const [processing, setProcessing] = useState(false);

  useEffect(() => {
    // Create worker on mount
    workerRef.current = new SyllableWorkerManager();
    
    // Cleanup on unmount
    return () => {
      workerRef.current?.terminate();
    };
  }, []);

  const processText = async (text: string) => {
    if (!workerRef.current) return;
    
    setProcessing(true);
    
    try {
      const lines = text.split('\n').map((text, index) => ({
        lineNumber: index + 1,
        text
      }));
      
      const result = await workerRef.current.processLines(lines);
      
      // Use result.results and result.errors
      console.log('Syllable counts:', result.results);
      console.log('Errors:', result.errors);
    } catch (error) {
      console.error('Processing failed:', error);
    } finally {
      setProcessing(false);
    }
  };

  return (
    <div>
      {processing && <div>Processing...</div>}
      {/* Editor component */}
    </div>
  );
}
```

---

## Best Practices

### Web Workers

1. **Create once, reuse** - Don't create new workers on every operation
2. **Use message IDs** - Track requests/responses with unique IDs
3. **Handle errors gracefully** - Always implement error handling
4. **Terminate when done** - Clean up workers to free resources
5. **Use TypeScript** - Type your message interfaces
6. **Batch operations** - Send multiple items in one message
7. **Progress updates** - Send progress for long operations
8. **Debounce triggers** - Don't spam the worker with messages

### Hyphen Package

1. **Cache results** - Store hyphenated results for unchanged text
2. **Batch processing** - Process multiple words at once
3. **Handle empty strings** - Check for empty/whitespace-only text
4. **Use async version** - Better performance for large texts
5. **Count soft hyphens** - Simple syllable counting method
6. **Error handling** - Catch and report words that fail to process
7. **Consider language** - Use appropriate language pattern
8. **Minimum word length** - Configure to avoid hyphenating short words

---

**End of Hyphen & Web Workers Reference Document**
</file>

<file path="docs/Installing_Tailwind_CSS_with_Vite_-_Tailwind_CSS.md">
# Installing with Vite - Installation

Tailwind CSS works by scanning all of your HTML files, JavaScript components, and any other templates for class names, generating the corresponding styles and then writing them to a static CSS file.

It's fast, flexible, and reliable — with zero-runtime.

-   ## [Using Vite](https://tailwindcss.com/docs/installation/using-vite)
    
-   ## [Using PostCSS](https://tailwindcss.com/docs/installation/using-postcss)
    
-   ## [Tailwind CLI](https://tailwindcss.com/docs/installation/tailwind-cli)
    
-   ## [Framework Guides](https://tailwindcss.com/docs/installation/framework-guides)
    
-   ## [Play CDN](https://tailwindcss.com/docs/installation/play-cdn)

### Installing Tailwind CSS as a Vite plugin

Installing Tailwind CSS as a Vite plugin is the most seamless way to integrate it with frameworks like Laravel, SvelteKit, React Router, Nuxt, and SolidJS.

01

#### Create your project

Start by creating a new Vite project if you don’t have one set up already. The most common approach is to use [Create Vite](https://vite.dev/guide/#scaffolding-your-first-vite-project).

Terminal

```
npm create vite@latest my-projectcd my-project
```

02

#### Install Tailwind CSS

Install 
```
tailwindcss
```
 and 
```
@tailwindcss/vite
```
 via npm.

Terminal

```
npm install tailwindcss @tailwindcss/vite
```

03

#### Configure the Vite plugin

Add the 
```
@tailwindcss/vite
```
 plugin to your Vite configuration.

vite.config.ts

```
import { defineConfig } from 'vite'import tailwindcss from '@tailwindcss/vite'export default defineConfig({  plugins: [    tailwindcss(),  ],})
```

04

#### Import Tailwind CSS

Add an 
```
@import
```
 to your CSS file that imports Tailwind CSS.

CSS

```
@import "tailwindcss";
```

05

#### Start your build process

Run your build process with 
```
npm run dev
```
 or whatever command is configured in your 
```
package.json
```
 file.

Terminal

```
npm run dev
```

06

#### Start using Tailwind in your HTML

Make sure your compiled CSS is included in the 
```
<head>
```
 _(your framework might handle this for you)_, then start using Tailwind’s utility classes to style your content.

HTML

```
<!doctype html><html><head>  <meta charset="UTF-8">  <meta name="viewport" content="width=device-width, initial-scale=1.0">  <link href="/src/style.css" rel="stylesheet"></head><body>  <h1 class="text-3xl font-bold underline">    Hello world!  </h1></body></html>
```

**Are you stuck?** Setting up Tailwind with Vite can be a bit different across different build tools. Check our framework guides to see if we have more specific instructions for your particular setup.
</file>

<file path="docs/react-codemirror-reference.md">
# React CodeMirror (@uiw/react-codemirror) Reference

> Downloaded from Context7 on November 9, 2025
> 
> This document contains the React integration documentation for CodeMirror 6.

---

## Table of Contents

1. [Installation](#installation)
2. [Basic Usage](#basic-usage)
3. [Component Props](#component-props)
4. [Hooks API](#hooks-api)
5. [Extensions](#extensions)
6. [Themes](#themes)
7. [Examples](#examples)

---

## Installation

```bash
npm install @uiw/react-codemirror --save
```

### Optional Extensions

```bash
# Basic setup extensions
npm install @uiw/codemirror-extensions-basic-setup --save

# Language support
npm install @codemirror/lang-javascript --save

# Themes
npm install @uiw/codemirror-theme-github --save
```

---

## Basic Usage

### Simple Editor

```jsx
import CodeMirror from '@uiw/react-codemirror';

function App() {
  return (
    <CodeMirror
      value="console.log('hello world!');"
      height="200px"
      onChange={(value, viewUpdate) => {
        console.log('value:', value);
      }}
    />
  );
}

export default App;
```

### With Language Support

```jsx
import CodeMirror from '@uiw/react-codemirror';
import { javascript } from '@codemirror/lang-javascript';

function App() {
  return (
    <CodeMirror
      value="console.log('hello world!');"
      height="200px"
      extensions={[javascript({ jsx: true })]}
      onChange={(value, viewUpdate) => {
        console.log('value:', value);
      }}
    />
  );
}

export default App;
```

### With Theme

```jsx
import CodeMirror from '@uiw/react-codemirror';
import { githubLight, githubDark } from '@uiw/codemirror-theme-github';
import { javascript } from '@codemirror/lang-javascript';

function App() {
  return (
    <CodeMirror
      value="console.log('hello world!');"
      height="200px"
      theme={githubLight}
      extensions={[javascript({ jsx: true })]}
      onChange={(value, viewUpdate) => {
        console.log('value:', value);
      }}
    />
  );
}

export default App;
```

---

## Component Props

### ReactCodeMirrorProps (TypeScript)

```typescript
interface ReactCodeMirrorProps
  extends Omit<EditorStateConfig, 'doc' | 'extensions'>,
    Omit<React.HTMLAttributes<HTMLDivElement>, 'onChange' | 'placeholder'> {
  
  /** Value of the editor */
  value?: string;
  
  /** Editor dimensions */
  height?: string;
  minHeight?: string;
  maxHeight?: string;
  width?: string;
  minWidth?: string;
  maxWidth?: string;
  
  /** Focus on the editor on mount */
  autoFocus?: boolean;
  
  /** Placeholder text when editor is empty */
  placeholder?: string | HTMLElement;
  
  /** Theme configuration
   * @default 'light'
   */
  theme?: 'light' | 'dark' | Extension;
  
  /** Enable basic setup
   * @default true
   */
  basicSetup?: boolean | BasicSetupOptions;
  
  /** Enable editing
   * @default true
   */
  editable?: boolean;
  
  /** Read-only mode
   * @default false
   */
  readOnly?: boolean;
  
  /** Tab key behavior
   * @default true
   */
  indentWithTab?: boolean;
  
  /** Fired when document changes */
  onChange?(value: string, viewUpdate: ViewUpdate): void;
  
  /** Statistics about the editor */
  onStatistics?(data: Statistics): void;
  
  /** First time the editor is created */
  onCreateEditor?(view: EditorView, state: EditorState): void;
  
  /** Fired on any state change */
  onUpdate?(viewUpdate: ViewUpdate): void;
  
  /** CodeMirror extensions */
  extensions?: Extension[];
  
  /** Root element (for shadow DOM) */
  root?: ShadowRoot | Document;
  
  /** Initialize from JSON state */
  initialState?: {
    json: any;
    fields?: Record<string, StateField<any>>;
  };
}
```

### ReactCodeMirrorRef

```typescript
interface ReactCodeMirrorRef {
  editor?: HTMLDivElement | null;
  state?: EditorState;
  view?: EditorView;
}
```

**Usage:**

```jsx
import { useRef } from 'react';
import CodeMirror from '@uiw/react-codemirror';

function App() {
  const editorRef = useRef<ReactCodeMirrorRef>(null);

  const handleClick = () => {
    if (editorRef.current?.view) {
      console.log(editorRef.current.view.state.doc.toString());
    }
  };

  return (
    <>
      <CodeMirror ref={editorRef} value="hello" />
      <button onClick={handleClick}>Get Content</button>
    </>
  );
}
```

---

## Hooks API

### useCodeMirror Hook

```typescript
interface UseCodeMirror extends ReactCodeMirrorProps {
  container?: HTMLDivElement | null;
}

function useCodeMirror(props: UseCodeMirror): {
  state: EditorState | undefined;
  setState: Dispatch<SetStateAction<EditorState | undefined>>;
  view: EditorView | undefined;
  setView: Dispatch<SetStateAction<EditorView | undefined>>;
  container: HTMLDivElement | null | undefined;
  setContainer: Dispatch<SetStateAction<HTMLDivElement | null | undefined>>;
}
```

**Usage:**

```jsx
import { useEffect, useRef } from 'react';
import { useCodeMirror } from '@uiw/react-codemirror';
import { javascript } from '@codemirror/lang-javascript';

function MyEditor() {
  const editor = useRef();
  const { setContainer } = useCodeMirror({
    container: editor.current,
    extensions: [javascript()],
    value: 'console.log("hello");',
  });

  useEffect(() => {
    if (editor.current) {
      setContainer(editor.current);
    }
  }, [editor.current]);

  return <div ref={editor} />;
}
```

---

## Extensions

### Basic Setup Extension

The `basicSetup` extension bundles numerous useful CodeMirror extensions:

#### BasicSetupOptions Interface

```typescript
interface BasicSetupOptions extends MinimalSetupOptions {
  lineNumbers?: boolean;
  highlightActiveLineGutter?: boolean;
  foldGutter?: boolean;
  dropCursor?: boolean;
  allowMultipleSelections?: boolean;
  indentOnInput?: boolean;
  bracketMatching?: boolean;
  closeBrackets?: boolean;
  autocompletion?: boolean;
  rectangularSelection?: boolean;
  crosshairCursor?: boolean;
  highlightActiveLine?: boolean;
  highlightSelectionMatches?: boolean;
  closeBracketsKeymap?: boolean;
  searchKeymap?: boolean;
  foldKeymap?: boolean;
  completionKeymap?: boolean;
  lintKeymap?: boolean;
  tabSize?: number;  // Default: 2
}
```

#### Included Features

- Default command bindings
- Line numbers
- Special character highlighting
- Undo history
- Fold gutter
- Custom selection drawing
- Drop cursor
- Multiple selections
- Reindentation on input
- Default highlight style
- Bracket matching
- Bracket closing
- Autocompletion
- Rectangular selection & crosshair cursor
- Active line highlighting
- Active line gutter highlighting
- Selection match highlighting
- Search
- Linting

#### Usage in React

```jsx
import CodeMirror from '@uiw/react-codemirror';

function App() {
  return (
    <CodeMirror
      value="console.log('hello world!');"
      height="200px"
      basicSetup={{
        foldGutter: false,
        dropCursor: false,
        allowMultipleSelections: false,
        indentOnInput: false,
        lineNumbers: true,
        tabSize: 4,
      }}
    />
  );
}
```

#### Standalone Usage

```javascript
import { EditorView } from '@codemirror/view';
import { EditorState } from '@codemirror/state';
import { basicSetup } from '@uiw/codemirror-extensions-basic-setup';

const state = EditorState.create({
  doc: 'my source code',
  extensions: [
    basicSetup({
      foldGutter: false,
      dropCursor: false,
    }),
  ],
});

const view = new EditorView({
  parent: document.querySelector('#editor'),
  state,
});
```

### Minimal Setup Extension

Lighter alternative to basicSetup:

```typescript
interface MinimalSetupOptions {
  highlightSpecialChars?: boolean;
  history?: boolean;
  drawSelection?: boolean;
  syntaxHighlighting?: boolean;
  defaultKeymap?: boolean;
  historyKeymap?: boolean;
}
```

**Includes:**
- Default keymap
- Undo history
- Special character highlighting
- Custom selection drawing
- Default highlight style

### Custom Extensions

```jsx
import CodeMirror from '@uiw/react-codemirror';
import { EditorView } from '@codemirror/view';
import { javascript } from '@codemirror/lang-javascript';

const myTheme = EditorView.theme({
  '&': {
    fontSize: '16px',
  },
  '.cm-content': {
    fontFamily: 'Menlo, Monaco, Courier New, monospace',
  },
});

function App() {
  return (
    <CodeMirror
      value="console.log('hello');"
      extensions={[
        javascript({ jsx: true }),
        myTheme,
      ]}
    />
  );
}
```

---

## Themes

### Built-in Theme Options

```jsx
import CodeMirror from '@uiw/react-codemirror';

function App() {
  return (
    <CodeMirror
      value="hello"
      theme="dark"  // 'light' | 'dark' | 'none'
    />
  );
}
```

### Using Theme Packages

```jsx
import CodeMirror from '@uiw/react-codemirror';
import { githubLight, githubDark } from '@uiw/codemirror-theme-github';
import { aura } from '@uiw/codemirror-theme-aura';

function App() {
  const [darkMode, setDarkMode] = useState(false);

  return (
    <CodeMirror
      value="console.log('hello');"
      theme={darkMode ? githubDark : githubLight}
    />
  );
}
```

### Custom Theme

```jsx
import CodeMirror from '@uiw/react-codemirror';
import { EditorView } from '@codemirror/view';

const myTheme = EditorView.theme({
  '&': {
    color: 'white',
    backgroundColor: '#034'
  },
  '.cm-content': {
    caretColor: '#0e9'
  },
  '&.cm-focused .cm-cursor': {
    borderLeftColor: '#0e9'
  },
  '&.cm-focused .cm-selectionBackground, ::selection': {
    backgroundColor: '#074'
  },
  '.cm-gutters': {
    backgroundColor: '#045',
    color: '#ddd',
    border: 'none'
  }
}, { dark: true });

function App() {
  return (
    <CodeMirror
      value="hello"
      theme={myTheme}
    />
  );
}
```

---

## Examples

### Controlled Component

```jsx
import { useState } from 'react';
import CodeMirror from '@uiw/react-codemirror';
import { javascript } from '@codemirror/lang-javascript';

function App() {
  const [value, setValue] = useState("console.log('hello world!');");

  const onChange = React.useCallback((val, viewUpdate) => {
    console.log('val:', val);
    setValue(val);
  }, []);

  return (
    <CodeMirror
      value={value}
      height="200px"
      extensions={[javascript({ jsx: true })]}
      onChange={onChange}
    />
  );
}
```

### With Custom Extensions

```jsx
import CodeMirror from '@uiw/react-codemirror';
import { EditorView } from '@codemirror/view';
import { javascript } from '@codemirror/lang-javascript';

function App() {
  const customExtension = EditorView.updateListener.of((update) => {
    if (update.docChanged) {
      console.log('Document changed!');
    }
  });

  return (
    <CodeMirror
      value="console.log('hello');"
      extensions={[
        javascript({ jsx: true }),
        customExtension,
      ]}
    />
  );
}
```

### Read-Only Editor

```jsx
import CodeMirror from '@uiw/react-codemirror';

function App() {
  return (
    <CodeMirror
      value="This is read-only"
      readOnly={true}
      editable={false}
    />
  );
}
```

### With Placeholder

```jsx
import CodeMirror from '@uiw/react-codemirror';

function App() {
  return (
    <CodeMirror
      value=""
      placeholder="Enter your code here..."
      height="200px"
    />
  );
}
```

### Auto Focus

```jsx
import CodeMirror from '@uiw/react-codemirror';

function App() {
  return (
    <CodeMirror
      value="console.log('hello');"
      autoFocus={true}
    />
  );
}
```

### Access View and State

```jsx
import { useRef } from 'react';
import CodeMirror from '@uiw/react-codemirror';

function App() {
  const editorRef = useRef();

  const handleGetContent = () => {
    const view = editorRef.current?.view;
    if (view) {
      const content = view.state.doc.toString();
      console.log(content);
    }
  };

  const handleSetSelection = () => {
    const view = editorRef.current?.view;
    if (view) {
      view.dispatch({
        selection: { anchor: 0, head: 5 }
      });
      view.focus();
    }
  };

  return (
    <>
      <CodeMirror
        ref={editorRef}
        value="hello world"
      />
      <button onClick={handleGetContent}>Get Content</button>
      <button onClick={handleSetSelection}>Select First 5 Chars</button>
    </>
  );
}
```

### Lifecycle Hooks

```jsx
import CodeMirror from '@uiw/react-codemirror';

function App() {
  const onCreateEditor = (view, state) => {
    console.log('Editor created!', view, state);
  };

  const onUpdate = (viewUpdate) => {
    console.log('Editor updated!', viewUpdate);
  };

  const onStatistics = (data) => {
    console.log('Statistics:', data);
  };

  return (
    <CodeMirror
      value="hello"
      onCreateEditor={onCreateEditor}
      onUpdate={onUpdate}
      onStatistics={onStatistics}
    />
  );
}
```

### Dynamic Height

```jsx
import CodeMirror from '@uiw/react-codemirror';

function App() {
  return (
    <CodeMirror
      value="Line 1\nLine 2\nLine 3"
      height="auto"
      minHeight="100px"
      maxHeight="400px"
    />
  );
}
```

### With Custom Styling

```jsx
import CodeMirror from '@uiw/react-codemirror';

function App() {
  return (
    <CodeMirror
      value="hello"
      style={{
        fontSize: '16px',
        border: '1px solid #ccc',
        borderRadius: '4px',
      }}
      className="my-custom-editor"
    />
  );
}
```

---

## Common Patterns for Cadence

### Pattern 1: Editor with Custom Gutter Extension

```jsx
import { useState, useCallback } from 'react';
import CodeMirror from '@uiw/react-codemirror';
import { EditorView } from '@codemirror/view';
import { syllableGutterExtension } from './extensions/syllableGutter';

function LyricEditor() {
  const [value, setValue] = useState('');

  const onChange = useCallback((val) => {
    setValue(val);
  }, []);

  const extensions = [
    syllableGutterExtension,
    EditorView.lineWrapping,
  ];

  return (
    <CodeMirror
      value={value}
      height="600px"
      extensions={extensions}
      onChange={onChange}
      placeholder="Start writing your lyrics..."
    />
  );
}
```

### Pattern 2: Editor with Multiple Custom Extensions

```jsx
import { useState, useCallback } from 'react';
import CodeMirror from '@uiw/react-codemirror';
import { syllableGutter } from './extensions/syllableGutter';
import { syllableDecorations } from './extensions/syllableDecorations';
import { smartFormatting } from './extensions/smartFormatting';
import { pasteHandler } from './extensions/pasteHandler';

function LyricEditor() {
  const [value, setValue] = useState('');

  const extensions = [
    syllableGutter,
    syllableDecorations,
    smartFormatting,
    pasteHandler,
  ];

  return (
    <CodeMirror
      value={value}
      height="100%"
      extensions={extensions}
      onChange={(val) => setValue(val)}
      basicSetup={{
        lineNumbers: false,  // We have custom gutter
        foldGutter: false,
        highlightActiveLine: true,
      }}
    />
  );
}
```

### Pattern 3: Editor with Theme Toggle

```jsx
import { useState } from 'react';
import CodeMirror from '@uiw/react-codemirror';
import { githubLight, githubDark } from '@uiw/codemirror-theme-github';

function LyricEditor() {
  const [value, setValue] = useState('');
  const [darkMode, setDarkMode] = useState(false);

  return (
    <>
      <button onClick={() => setDarkMode(!darkMode)}>
        Toggle Theme
      </button>
      <CodeMirror
        value={value}
        theme={darkMode ? githubDark : githubLight}
        onChange={setValue}
      />
    </>
  );
}
```

---

## Best Practices

1. **Use `useCallback` for event handlers** - Prevents unnecessary re-renders
2. **Memoize extensions array** - Use `useMemo` to avoid recreating extensions
3. **Access view via ref** - For imperative operations like focus, selection
4. **Control vs Uncontrolled** - Use controlled component pattern when state matters
5. **Lazy load language support** - Import language modules dynamically if needed
6. **Custom extensions in separate files** - Keep editor component clean
7. **Theme switching** - Use state to toggle between themes
8. **Height management** - Use `minHeight`/`maxHeight` for flexible layouts
9. **Update listener for heavy operations** - Use `onUpdate` for async operations
10. **Testing** - Use `onCreateEditor` to access view/state in tests

---

**End of React CodeMirror Reference Document**
</file>

<file path="docs/README.md">
# Documentation Reference - Cadence Project

> All documentation downloaded and saved on November 9, 2025

This directory contains comprehensive reference documentation for all key technologies used in the Cadence application.

---

## 📚 Available Documentation

### 1. CodeMirror 6 API Reference
**File:** `codemirror-reference.md`

**Contents:**
- ✅ Editor Setup & Initialization
- ✅ Extensions & Configuration
- ✅ Gutters API (Custom gutters, GutterMarker class, line numbers)
- ✅ Decorations API (Mark, Widget, Replace, Line decorations)
- ✅ State Management (StateField, StateEffect, Facets)
- ✅ View Plugins (fromClass, define, lifecycle)
- ✅ Event Handling (DOM events, update listeners)
- ✅ Theming (Base theme, custom themes)
- ✅ Best Practices & Common Patterns

**Key Topics for Cadence:**
- Custom gutter implementation for syllable counts
- Decoration system for inline syllable markers
- State management for async processing
- Pattern matching for smart formatting

---

### 2. React CodeMirror Reference
**File:** `react-codemirror-reference.md`

**Contents:**
- ✅ Installation & Setup
- ✅ Component Props & TypeScript Types
- ✅ Hooks API (useCodeMirror)
- ✅ Extensions Integration
- ✅ Theme Configuration
- ✅ Lifecycle Hooks
- ✅ Basic Setup Options
- ✅ Controlled Component Patterns
- ✅ Ref Access to View/State

**Key Topics for Cadence:**
- React integration patterns
- Extension management in React
- State synchronization
- Component lifecycle with editor

---

### 3. Hyphen Package & Web Workers Reference
**File:** `hyphen-webworkers-reference.md`

**Contents:**
- ✅ Hyphen Package Usage (async/sync APIs)
- ✅ Syllable Counting Algorithm (soft hyphen counting)
- ✅ Multilingual Support
- ✅ Configuration Options
- ✅ Web Workers API (TypeScript patterns)
- ✅ Vite Web Worker Configuration
- ✅ Worker Manager Implementation
- ✅ Complete Cadence Worker Example

**Key Topics for Cadence:**
- Syllable counting from hyphenation
- Async processing in Web Workers
- TypeScript worker patterns
- Message passing & error handling

---

## 🎯 Quick Start Guide

### For Editor Implementation
1. Start with `codemirror-reference.md` → **Gutters API** section
2. Review `react-codemirror-reference.md` → **Basic Usage** section
3. Study the **Common Patterns for Cadence** in both docs

### For Syllable Processing
1. Read `hyphen-webworkers-reference.md` → **Hyphen Package** section
2. Review **Syllable Processor Worker** example
3. Implement **Worker Manager** pattern

### For State Management
1. Study `codemirror-reference.md` → **State Management** section
2. Review **StateField** and **StateEffect** patterns
3. See **Facets** section for computed values

---

## 🔍 Finding Specific Information

### Custom Gutters
- **File:** `codemirror-reference.md`
- **Sections:** Gutters API → Custom Gutter Definition, GutterMarker Class
- **Pattern:** Common Patterns for Cadence → Pattern 1

### Decorations for Syllable Markers
- **File:** `codemirror-reference.md`
- **Sections:** Decorations API → Mark Decoration, MatchDecorator
- **Pattern:** Common Patterns for Cadence → Pattern 2

### React Integration
- **File:** `react-codemirror-reference.md`
- **Sections:** Component Props, Extensions, Examples
- **Pattern:** Common Patterns for Cadence (all patterns)

### Web Worker Setup
- **File:** `hyphen-webworkers-reference.md`
- **Sections:** Web Workers API, TypeScript Web Worker Pattern, Vite Configuration
- **Example:** Cadence-Specific Implementation

### Syllable Counting
- **File:** `hyphen-webworkers-reference.md`
- **Section:** Hyphen Package → Example: Counting Syllables
- **Formula:** `syllables = softHyphens + 1`

---

## 📖 Code Examples by Feature

### Feature 1: Syllable Gutter
**References:**
- `codemirror-reference.md` → Gutters API → Custom Gutter Definition
- `codemirror-reference.md` → Common Patterns → Pattern 1
- `react-codemirror-reference.md` → Common Patterns → Pattern 1

### Feature 2: Inline Syllable Markers
**References:**
- `codemirror-reference.md` → Decorations API → Mark Decoration
- `codemirror-reference.md` → MatchDecorator
- `codemirror-reference.md` → Common Patterns → Pattern 2

### Feature 3: Smart Formatting
**References:**
- `codemirror-reference.md` → Decorations API → MatchDecorator
- `codemirror-reference.md` → View Plugins → View Plugin with Decorations

### Feature 4: Async Syllable Processing
**References:**
- `hyphen-webworkers-reference.md` → Complete document
- `codemirror-reference.md` → State Management → StateField

### Feature 5: Paste Handling
**References:**
- `codemirror-reference.md` → Event Handling → DOM Event Handlers
- `codemirror-reference.md` → Common Patterns → Pattern 3

---

## 🛠️ Implementation Order

Based on the documentation, implement features in this order:

1. **Basic Editor Setup** (Day 1)
   - Reference: `react-codemirror-reference.md` → Basic Usage
   - Create basic React component with CodeMirror

2. **Syllable Processing** (Day 2)
   - Reference: `hyphen-webworkers-reference.md` → Syllable Processor Worker
   - Implement Web Worker for hyphenation

3. **Gutter Display** (Day 3)
   - Reference: `codemirror-reference.md` → Gutters API
   - Create custom syllable gutter

4. **State Integration** (Day 4)
   - Reference: `codemirror-reference.md` → State Management
   - Connect worker results to gutter via StateField

5. **Inline Markers** (Day 5)
   - Reference: `codemirror-reference.md` → Decorations API
   - Add syllable separators

6. **Smart Formatting** (Day 6)
   - Reference: `codemirror-reference.md` → MatchDecorator
   - Pattern matching for sections/chords/comments

7. **Polish** (Day 7-8)
   - Reference: All docs → Best Practices sections
   - Performance optimization, error handling

---

## 📝 Key Concepts Summary

### CodeMirror Architecture
- **Immutable State** - Never mutate editor state
- **Transactions** - All changes via transactions
- **Extensions** - Modular, composable functionality
- **Decorations** - Visual markup without DOM manipulation
- **Facets** - Computed values from state

### React Integration
- **Controlled Components** - State synchronization
- **Refs** - Access to view/state
- **Extensions Array** - Pass via props
- **Memoization** - Prevent unnecessary re-renders

### Web Workers
- **Message Passing** - Structured cloning
- **Type Safety** - Typed request/response
- **Promise Wrapper** - Async/await pattern
- **Error Handling** - Reject pending requests

### Hyphen Package
- **Soft Hyphens** - `\u00AD` character
- **Syllable Formula** - Count hyphens + 1
- **Async API** - Returns Promise
- **HTML Support** - Skips tags automatically

---

## 🎨 Visual Reference

### Editor Structure
```
┌─────────────────────────────────────┐
│ cm-editor                           │
│ ┌─────────────────────────────────┐ │
│ │ cm-scroller                     │ │
│ │ ┌─────────────────────────────┐ │ │
│ │ │ cm-gutters                  │ │ │
│ │ │ ┌────────┐                  │ │ │
│ │ │ │ Custom │  cm-content      │ │ │
│ │ │ │ Gutter │  (editable)      │ │ │
│ │ │ └────────┘                  │ │ │
│ │ └─────────────────────────────┘ │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

### Data Flow
```
User Types
    ↓
Editor Updates
    ↓
Debounce (300ms)
    ↓
Extract Lines
    ↓
Web Worker (hyphen/en)
    ↓
Count Syllables
    ↓
Update StateField
    ↓
Render Gutter + Decorations
```

---

## ⚠️ Important Notes

### Vite Configuration
- Web Workers work out-of-the-box with Vite
- Use `new URL('./worker.ts', import.meta.url)` pattern
- No special webpack config needed

### TypeScript
- Include `"WebWorker"` in lib for worker files
- Use separate interfaces for request/response
- Type all message events

### Performance
- Debounce editor changes (300ms recommended)
- Batch worker requests
- Cache hyphenation results
- Use viewport-only rendering

### Browser Support
- All modern browsers support Web Workers
- Soft hyphens (`\u00AD`) are universally supported
- CodeMirror 6 targets ES2018+

---

## 🔗 External Resources

While these docs are comprehensive, you may also reference:

- **CodeMirror Official:** https://codemirror.net/
- **hyphen on npm:** https://www.npmjs.com/package/hyphen
- **MDN Web Workers:** https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API
- **Vite Documentation:** https://vitejs.dev/

---

## 📦 Dependencies Reference

All documentation covers these packages:

```json
{
  "dependencies": {
    "@uiw/react-codemirror": "^4.23.5",
    "@codemirror/view": "^6.35.0",
    "@codemirror/state": "^6.4.1",
    "@codemirror/language": "^6.10.3",
    "hyphen": "^1.10.6"
  },
  "devDependencies": {
    "@types/hyphen": "^1.3.0",
    "typescript": "^5.6.3",
    "vite": "^6.0.3"
  }
}
```

---

## ✅ Documentation Coverage

- ✅ **CodeMirror Core API** - 10,000+ tokens
- ✅ **React CodeMirror Integration** - 5,000+ tokens  
- ✅ **Hyphen Package Usage** - Complete reference
- ✅ **Web Workers Implementation** - Full patterns
- ✅ **TypeScript Types** - All interfaces documented
- ✅ **Best Practices** - For all technologies
- ✅ **Code Examples** - 50+ examples
- ✅ **Cadence-Specific Patterns** - Ready to implement

**Total Documentation:** ~20,000 words / 3 comprehensive reference files

---

**Ready to build! All necessary documentation is saved and organized.**
</file>

<file path="docs/Responsive_design_-_Core_concepts_-_Tailwind_CSS.md">
# Responsive design - Core concept

Using responsive utility variants to build adaptive user interfaces.

## [Overview](#overview)

Every utility class in Tailwind can be applied conditionally at different breakpoints, which makes it a piece of cake to build complex responsive interfaces without ever leaving your HTML.

First, make sure you've added the [viewport meta tag](https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag) to the 
```
<head>
```
 of your document:

index.html

```
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
```

Then to add a utility but only have it take effect at a certain breakpoint, all you need to do is prefix the utility with the breakpoint name, followed by the 
```
:
```
 character:

HTML

```
<!-- Width of 16 by default, 32 on medium screens, and 48 on large screens --><img class="w-16 md:w-32lg:w-48" src="..." />
```

There are five breakpoints by default, inspired by common device resolutions:

 Breakpoint prefix | Minimum width | CSS |
| --- | --- | --- |
 
```
sm
```
 | 40rem _(640px)_ | 
```
@media (width >= 40rem) { ... }
```
 |
 
```
md
```
 | 48rem _(768px)_ | 
```
@media (width >= 48rem) { ... }
```
 |
 
```
lg
```
 | 64rem _(1024px)_ | 
```
@media (width >= 64rem) { ... }
```
 |
 
```
xl
```
 | 80rem _(1280px)_ | 
```
@media (width >= 80rem) { ... }
```
 |
 
```
2xl
```
 | 96rem _(1536px)_ | 
```
@media (width >= 96rem) { ... }
```
 |

This works for **every utility class in the framework**, which means you can change literally anything at a given breakpoint — even things like letter spacing or cursor styles.

Here's a simple example of a marketing page component that uses a stacked layout on small screens, and a side-by-side layout on larger screens:

```
<div class="mx-auto max-w-md overflow-hidden rounded-xl bg-white shadow-md md:max-w-2xl">  <div class="md:flex">    <div class="md:shrink-0">      <img        class="h-48 w-full object-cover md:h-fullmd:w-48"        src="/img/building.jpg"        alt="Modern building architecture"      />    </div>    <div class="p-8">      <div class="text-sm font-semibold tracking-wide text-indigo-500 uppercase">Company retreats</div>      <a href="#" class="mt-1 block text-lg leading-tight font-medium text-black hover:underline">        Incredible accommodation for your team      </a>      <p class="mt-2 text-gray-500">        Looking to take your team away on a retreat to enjoy awesome food and take in some sunshine? We have a list of        places to do just that.      </p>    </div>  </div></div>
```

Here's how the example above works:

-   By default, the outer 
    ```
    div
    ```
     is 
    ```
    display: block
    ```
    , but by adding the 
    ```
    md:flex
    ```
     utility, it becomes 
    ```
    display: flex
    ```
     on medium screens and larger.
-   When the parent is a flex container, we want to make sure the image never shrinks, so we've added 
    ```
    md:shrink-0
    ```
     to prevent shrinking on medium screens and larger. Technically we could have just used 
    ```
    shrink-0
    ```
     since it would do nothing on smaller screens, but since it only matters on 
    ```
    md
    ```
     screens, it's a good idea to make that clear in the class name.
-   On small screens the image is automatically full width by default. On medium screens and up, we've constrained the width to a fixed size and ensured the image is full height using 
    ```
    md:h-full md:w-48
    ```
    .

We've only used one breakpoint in this example, but you could easily customize this component at other sizes using the 
```
sm
```
, 
```
lg
```
, 
```
xl
```
, or 
```
2xl
```
 responsive prefixes as well.

## [Working mobile-first](#working-mobile-first)

Tailwind uses a mobile-first breakpoint system, similar to what you might be used to in other frameworks like Bootstrap.

What this means is that unprefixed utilities (like 
```
uppercase
```
) take effect on all screen sizes, while prefixed utilities (like 
```
md:uppercase
```
) only take effect at the specified breakpoint _and above_.

### [Targeting mobile screens](#targeting-mobile-screens)

Where this approach surprises people most often is that to style something for mobile, you need to use the unprefixed version of a utility, not the 
```
sm:
```
 prefixed version. Don't think of 
```
sm:
```
 as meaning "on small screens", think of it as "at the small _breakpoint_".

Don't use 
```
sm:
```
 to target mobile devices

HTML

```
<!-- This will only center text on screens 640px and wider, not on small screens --><div class="sm:text-center"></div>
```

Use unprefixed utilities to target mobile, and override them at larger breakpoints

HTML

```
<!-- This will center text on mobile, and left align it on screens 640px and wider --><div class="text-center sm:text-left"></div>
```

For this reason, it's often a good idea to implement the mobile layout for a design first, then layer on any changes that make sense for 
```
sm
```
 screens, followed by 
```
md
```
 screens, etc.

### [Targeting a breakpoint range](#targeting-a-breakpoint-range)

By default, styles applied by rules like 
```
md:flex
```
 will apply at that breakpoint and stay applied at larger breakpoints.

If you'd like to apply a utility _only_ when a specific breakpoint range is active, stack a responsive variant like 
```
md
```
 with a 
```
max-*
```
 variant to limit that style to a specific range:

HTML

```
<div class="md:max-xl:flex">  <!-- ... --></div>
```

Tailwind generates a corresponding 
```
max-*
```
 variant for each breakpoint, so out of the box the following variants are available:

 Variant | Media query |
| --- | --- |
 
```
max-sm
```
 | 
```
@media (width < 40rem) { ... }
```
 |
 
```
max-md
```
 | 
```
@media (width < 48rem) { ... }
```
 |
 
```
max-lg
```
 | 
```
@media (width < 64rem) { ... }
```
 |
 
```
max-xl
```
 | 
```
@media (width < 80rem) { ... }
```
 |
 
```
max-2xl
```
 | 
```
@media (width < 96rem) { ... }
```
 |

### [Targeting a single breakpoint](#targeting-a-single-breakpoint)

To target a single breakpoint, target the range for that breakpoint by stacking a responsive variant like 
```
md
```
 with the 
```
max-*
```
 variant for the next breakpoint:

HTML

```
<div class="md:max-lg:flex">  <!-- ... --></div>
```

Read about [targeting breakpoint ranges](#targeting-a-breakpoint-range) to learn more.

## [Using custom breakpoints](#using-custom-breakpoints)

### [Customizing your theme](#customizing-your-theme)

Use the 
```
--breakpoint-*
```
 theme variables to customize your breakpoints:

app.css

```
@import "tailwindcss";@theme {  --breakpoint-xs: 30rem;  --breakpoint-2xl: 100rem;  --breakpoint-3xl: 120rem;}
```

This updates the 
```
2xl
```
 breakpoint to use 
```
100rem
```
 instead of the default 
```
96rem
```
, and creates new 
```
xs
```
 and 
```
3xl
```
 breakpoints that can be used in your markup:

HTML

```
<div class="grid xs:grid-cols-23xl:grid-cols-6">  <!-- ... --></div>
```

Note that it's important to always use the same unit for defining your breakpoints or the generated utilities may be sorted in an unexpected order, causing breakpoint classes to override each other in unexpected ways.

Tailwind uses 
```
rem
```
 for the default breakpoints, so if you are adding additional breakpoints to the defaults, make sure you use 
```
rem
```
 as well.

Learn more about customizing your theme in the [theme documentation](https://tailwindcss.com/docs/theme).

### [Removing default breakpoints](#removing-default-breakpoints)

To remove a default breakpoint, reset its value to the 
```
initial
```
 keyword:

app.css

```
@import "tailwindcss";@theme {  --breakpoint-2xl: initial;}
```

You can also reset all of the default breakpoints using 
```
--breakpoint-*: initial
```
, then define all of your breakpoints from scratch:

app.css

```
@import "tailwindcss";@theme {  --breakpoint-*: initial;  --breakpoint-tablet: 40rem;  --breakpoint-laptop: 64rem;  --breakpoint-desktop: 80rem;}
```

Learn more removing default theme values in the [theme documentation](https://tailwindcss.com/docs/theme).

### [Using arbitrary values](#using-arbitrary-values)

If you need to use a one-off breakpoint that doesn’t make sense to include in your theme, use the 
```
min
```
 or 
```
max
```
 variants to generate a custom breakpoint on the fly using any arbitrary value.

```
<div class="max-[600px]:bg-sky-300min-[320px]:text-center">  <!-- ... --></div>
```

Learn more about arbitrary value support in the [arbitrary values](https://tailwindcss.com/docs/adding-custom-styles#using-arbitrary-values) documentation.

## [Container queries](#container-queries)

### [What are container queries?](#what-are-container-queries)

[Container queries](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_containment/Container_queries) are a modern CSS feature that let you style something based on the size of a parent element instead of the size of the entire viewport. They let you build components that are a lot more portable and reusable because they can change based on the actual space available for that component.

### [Basic example](#basic-example)

Use the 
```
@container
```
 class to mark an element as a container, then use variants like 
```
@sm
```
 and 
```
@md
```
 to style child elements based on the size of the container:

HTML

```
<div class="@container">  <div class="flex flex-col @md:flex-row">    <!-- ... -->  </div></div>
```

Just like breakpoint variants, container queries are mobile-first in Tailwind CSS and apply at the target container size and up.

### [Max-width container queries](#max-width-container-queries)

Use variants like 
```
@max-sm
```
 and 
```
@max-md
```
 to apply a style below a specific container size:

HTML

```
<div class="@container">  <div class="flex flex-row @max-md:flex-col">    <!-- ... -->  </div></div>
```

### [Container query ranges](#container-query-ranges)

Stack a regular container query variant with a max-width container query variant to target a specific range:

HTML

```
<div class="@container">  <div class="flex flex-row @sm:@max-md:flex-col">    <!-- ... -->  </div></div>
```

### [Named containers](#named-containers)

For complex designs that use multiple nested containers, you can name containers using 
```
@container/{name}
```
 and target specific containers with variants like 
```
@sm/{name}
```
 and 
```
@md/{name}
```
:

HTML

```
<div class="@container/main">  <!-- ... -->  <div class="flex flex-row @sm/main:flex-col">    <!-- ... -->  </div></div>
```

This makes it possible to style something based on the size of a distant container, rather than just the nearest container.

### [Using custom container sizes](#using-custom-container-sizes)

Use the 
```
--container-*
```
 theme variables to customize your container sizes:

app.css

```
@import "tailwindcss";@theme {  --container-8xl: 96rem;}
```

This adds a new 
```
8xl
```
 container query variant that can be used in your markup:

HTML

```
<div class="@container">  <div class="flex flex-col @8xl:flex-row">    <!-- ... -->  </div></div>
```

Learn more about customizing your theme in the [theme documentation](https://tailwindcss.com/docs/theme).

### [Using arbitrary values](#using-arbitrary-container-query-values)

Use variants like 
```
@min-[475px]
```
 and 
```
@max-[960px]
```
 for one-off container query sizes you don't want to add to your theme:

HTML

```
<div class="@container">  <div class="flex flex-col @min-[475px]:flex-row">    <!-- ... -->  </div></div>
```

### [Using container query units](#using-container-query-units)

Use [container query length units](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_containment/Container_queries#container_query_length_units) like 
```
cqw
```
 as arbitrary values in other utility classes to reference the container size:

HTML

```
<div class="@container">  <div class="w-[50cqw]">    <!-- ... -->  </div></div>
```

### [Container size reference](#container-size-reference)

By default, Tailwind includes container sizes ranging from 16rem _(256px)_ to 80rem _(1280px)_:

 Variant | Minimum width | CSS |
| --- | --- | --- |
 
```
@3xs
```
 | 16rem _(256px)_ | 
```
@container (width >= 16rem) { … }
```
 |
 
```
@2xs
```
 | 18rem _(288px)_ | 
```
@container (width >= 18rem) { … }
```
 |
 
```
@xs
```
 | 20rem _(320px)_ | 
```
@container (width >= 20rem) { … }
```
 |
 
```
@sm
```
 | 24rem _(384px)_ | 
```
@container (width >= 24rem) { … }
```
 |
 
```
@md
```
 | 28rem _(448px)_ | 
```
@container (width >= 28rem) { … }
```
 |
 
```
@lg
```
 | 32rem _(512px)_ | 
```
@container (width >= 32rem) { … }
```
 |
 
```
@xl
```
 | 36rem _(576px)_ | 
```
@container (width >= 36rem) { … }
```
 |
 
```
@2xl
```
 | 42rem _(672px)_ | 
```
@container (width >= 42rem) { … }
```
 |
 
```
@3xl
```
 | 48rem _(768px)_ | 
```
@container (width >= 48rem) { … }
```
 |
 
```
@4xl
```
 | 56rem _(896px)_ | 
```
@container (width >= 56rem) { … }
```
 |
 
```
@5xl
```
 | 64rem _(1024px)_ | 
```
@container (width >= 64rem) { … }
```
 |
 
```
@6xl
```
 | 72rem _(1152px)_ | 
```
@container (width >= 72rem) { … }
```
 |
 
```
@7xl
```
 | 80rem _(1280px)_ | 
```
@container (width >= 80rem) { … }
```
 |
</file>

<file path="docs/Styling_with_utility_classes_-_Core_concepts_-_Tailwind_CSS.md">
# Styling with utility classes - Core concept

Building complex components from a constrained set of primitive utilities.

## [Overview](#overview)

You style things with Tailwind by combining many single-purpose presentational classes _(utility classes)_ directly in your markup:

ChitChat

You have a new message!

```
<div class="mx-auto flex max-w-sm items-center gap-x-4 rounded-xl bg-white p-6 shadow-lg outline outline-black/5 dark:bg-slate-800 dark:shadow-none dark:-outline-offset-1 dark:outline-white/10">  <img class="size-12 shrink-0" src="/img/logo.svg" alt="ChitChat Logo" />  <div>    <div class="text-xl font-medium text-black dark:text-white">ChitChat</div>    <p class="text-gray-500 dark:text-gray-400">You have a new message!</p>  </div></div>
```

For example, in the UI above we've used:

-   The [display](https://tailwindcss.com/docs/display#flex) and [padding](https://tailwindcss.com/docs/padding) utilities (
    ```
    flex
    ```
    , 
    ```
    shrink-0
    ```
    , and 
    ```
    p-6
    ```
    ) to control the overall layout
-   The [max-width](https://tailwindcss.com/docs/max-width) and [margin](https://tailwindcss.com/docs/margin) utilities (
    ```
    max-w-sm
    ```
     and 
    ```
    mx-auto
    ```
    ) to constrain the card width and center it horizontally
-   The [background-color](https://tailwindcss.com/docs/background-color), [border-radius](https://tailwindcss.com/docs/border-radius), and [box-shadow](https://tailwindcss.com/docs/box-shadow) utilities (
    ```
    bg-white
    ```
    , 
    ```
    rounded-xl
    ```
    , and 
    ```
    shadow-lg
    ```
    ) to style the card's appearance
-   The [width](https://tailwindcss.com/docs/width) and [height](https://tailwindcss.com/docs/height) utilities (
    ```
    size-12
    ```
    ) to set the width and height of the logo image
-   The [gap](https://tailwindcss.com/docs/gap) utilities (
    ```
    gap-x-4
    ```
    ) to handle the spacing between the logo and the text
-   The [font-size](https://tailwindcss.com/docs/font-size), [color](https://tailwindcss.com/docs/text-color), and [font-weight](https://tailwindcss.com/docs/font-weight) utilities (
    ```
    text-xl
    ```
    , 
    ```
    text-black
    ```
    , 
    ```
    font-medium
    ```
    , etc.) to style the card text

Styling things this way contradicts a lot of traditional best practices, but once you try it you'll quickly notice some really important benefits:

-   **You get things done faster** — you don't spend any time coming up with class names, making decisions about selectors, or switching between HTML and CSS files, so your designs come together very fast.
-   **Making changes feels safer** — adding or removing a utility class to an element only ever affects that element, so you never have to worry about accidentally breaking something another page that's using the same CSS.
-   **Maintaining old projects is easier** — changing something just means finding that element in your project and changing the classes, not trying to remember how all of that custom CSS works that you haven't touched in six months.
-   **Your code is more portable** — since both the structure and styling live in the same place, you can easily copy and paste entire chunks of UI around, even between different projects.
-   **Your CSS stops growing** — since utility classes are so reusable, your CSS doesn't continue to grow linearly with every new feature you add to a project.

These benefits make a big difference on small projects, but they are even more valuable for teams working on long-running projects at scale.

### [Why not just use inline styles?](#why-not-just-use-inline-styles)

A common reaction to this approach is wondering, “isn’t this just inline styles?” and in some ways it is — you’re applying styles directly to elements instead of assigning them a class name and then styling that class.

But using utility classes has many important advantages over inline styles, for example:

-   **Designing with constraints** — using inline styles, every value is a magic number. With utilities, you’re choosing styles from a [predefined design system](https://tailwindcss.com/docs/theme), which makes it much easier to build visually consistent UIs.
-   **Hover, focus, and other states** — inline styles can’t target states like hover or focus, but Tailwind’s [state variants](https://tailwindcss.com/docs/hover-focus-and-other-states) make it easy to style those states with utility classes.
-   **Media queries** — you can’t use media queries in inline styles, but you can use Tailwind’s [responsive variants](https://tailwindcss.com/docs/responsive-design) to build fully responsive interfaces easily.

This component is fully responsive and includes a button with hover and active styles, and is built entirely with utility classes:

```
<div class="flex flex-col gap-2 p-8 sm:flex-rowsm:items-centersm:gap-6sm:py-4 ...">  <img class="mx-auto block h-24 rounded-full sm:mx-0sm:shrink-0" src="/img/erin-lindford.jpg" alt="" />  <div class="space-y-2 text-center sm:text-left">    <div class="space-y-0.5">      <p class="text-lg font-semibold text-black">Erin Lindford</p>      <p class="font-medium text-gray-500">Product Engineer</p>    </div>    <button class="border-purple-200 text-purple-600 hover:border-transparenthover:bg-purple-600hover:text-whiteactive:bg-purple-700 ...">      Message    </button>  </div></div>
```

## [Thinking in utility classes](#thinking-in-utility-classes)

### [Styling hover and focus states](#styling-hover-and-focus-states)

To style an element on states like hover or focus, prefix any utility with the state you want to target, for example 
```
hover:bg-sky-700
```
:

Hover over this button to see the background color change

```
<button class="bg-sky-500 hover:bg-sky-700 ...">Save changes</button>
```

These prefixes are called [variants](https://tailwindcss.com/docs/hover-focus-and-other-states) in Tailwind, and they only apply the styles from a utility class when the condition for that variant matches.

Here's what the generated CSS looks like for the 
```
hover:bg-sky-700
```
 class:

Generated CSS

```
.hover\:bg-sky-700 {  &:hover {    background-color: var(--color-sky-700);  }}
```

Notice how this class does nothing _unless_ the element is hovered? Its _only_ job is to provide hover styles — nothing else.

This is different from how you'd write traditional CSS, where a single class would usually provide the styles for many states:

HTML

```
<button class="btn">Save changes</button><style>  .btn {    background-color: var(--color-sky-500);    &:hover {      background-color: var(--color-sky-700);    }  }</style>
```

You can even stack variants in Tailwind to apply a utility when multiple conditions match, like combining 
```
hover:
```
 and 
```
disabled:
```

```
<button class="bg-sky-500 disabled:hover:bg-sky-500 ...">Save changes</button>
```

Learn more in the documentation styling elements on [hover, focus, and other states](https://tailwindcss.com/docs/hover-focus-and-other-states).

### [Media queries and breakpoints](#media-queries-and-breakpoints)

Just like hover and focus states, you can style elements at different breakpoints by prefixing any utility with the breakpoint where you want that style to apply:

Resize this example to see the layout change

```
<div class="grid grid-cols-2 sm:grid-cols-3">  <!-- ... --></div>
```

In the example above, the 
```
sm:
```
 prefix makes sure that 
```
grid-cols-3
```
 only triggers at the 
```
sm
```
 breakpoint and above, which is 40rem out of the box:

Generated CSS

```
.sm\:grid-cols-3 {  @media (width >= 40rem) {    grid-template-columns: repeat(3, minmax(0, 1fr));  }}
```

Learn more in the [responsive design](https://tailwindcss.com/docs/responsive-design) documentation.

### [Targeting dark mode](#targeting-dark-mode)

Styling an element in dark mode is just a matter of adding the 
```
dark:
```
 prefix to any utility you want to apply when dark mode is active:

Light mode

Writes upside-down

The Zero Gravity Pen can be used to write in any orientation, including upside-down. It even works in outer space.

Dark mode

Writes upside-down

The Zero Gravity Pen can be used to write in any orientation, including upside-down. It even works in outer space.

```
<div class="bg-white dark:bg-gray-800 rounded-lg px-6 py-8 ring shadow-xl ring-gray-900/5">  <div>    <span class="inline-flex items-center justify-center rounded-md bg-indigo-500 p-2 shadow-lg">      <svg        class="h-6 w-6 text-white"        fill="none"        viewBox="0 0 24 24"        stroke="currentColor"        aria-hidden="true"      >        <!-- ... -->      </svg>    </span>  </div>  <h3 class="text-gray-900 dark:text-white mt-5 text-base font-medium tracking-tight ">Writes upside-down</h3>  <p class="text-gray-500 dark:text-gray-400 mt-2 text-sm ">    The Zero Gravity Pen can be used to write in any orientation, including upside-down. It even works in outer space.  </p></div>
```

Just like with hover states or media queries, the important thing to understand is that a single utility class will never include _both_ the light and dark styles — you style things in dark mode by using multiple classes, one for the light mode styles and another for the dark mode styles.

Generated CSS

```
.dark\:bg-gray-800 {  @media (prefers-color-scheme: dark) {    background-color: var(--color-gray-800);  }}
```

Learn more in the [dark mode](https://tailwindcss.com/docs/dark-mode) documentation.

### [Using class composition](#using-class-composition)

A lot of the time with Tailwind you'll even use multiple classes to build up the value for a single CSS property, for example adding multiple filters to an element:

HTML

```
<div class="blur-smgrayscale">  <!-- ... --></div>
```

Both of these effects rely on the 
```
filter
```
 property in CSS, so Tailwind uses CSS variables to make it possible to compose these effects together:

Generated CSS

```
.blur-sm {  --tw-blur: blur(var(--blur-sm));  filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-grayscale,);}.grayscale {  --tw-grayscale: grayscale(100%);  filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-grayscale,);}
```

The generated CSS above is slightly simplified, but the trick here is that each utility sets a CSS variable just for the effect it's meant to apply. Then the 
```
filter
```
 property looks at all of these variables, falling back to nothing if the variable hasn't been set.

Tailwind uses this same approach for [gradients](https://tailwindcss.com/docs/background-image#adding-a-linear-gradient), [shadow colors](https://tailwindcss.com/docs/box-shadow#setting-the-shadow-color), [transforms](https://tailwindcss.com/docs/translate), and more.

### [Using arbitrary values](#using-arbitrary-values)

Many utilities in Tailwind are driven by [theme variables](https://tailwindcss.com/docs/theme), like 
```
bg-blue-500
```
, 
```
text-xl
```
, and 
```
shadow-md
```
, which map to your underlying color palette, type scale, and shadows.

When you need to use a one-off value outside of your theme, use the special square bracket syntax for specifying arbitrary values:

HTML

```
<button class="bg-[#316ff6] ...">  Sign in with Facebook</button>
```

This can be useful for one-off colors outside of your color palette _(like the Facebook blue above)_, but also when you need a complex custom value like a very specific grid:

HTML

```
<div class="grid grid-cols-[24rem_2.5rem_minmax(0,1fr)]">  <!-- ... --></div>
```

It's also useful when you need to use CSS features like 
```
calc()
```
, even if you are using your theme values:

HTML

```
<div class="max-h-[calc(100dvh-(--spacing(6)))]">  <!-- ... --></div>
```

There's even a syntax for generating completely arbitrary CSS including an arbitrary property name, which can be useful for setting CSS variables:

HTML

```
<div class="[--gutter-width:1rem]lg:[--gutter-width:2rem]">  <!-- ... --></div>
```

Learn more in the documentation on [using arbitrary values](https://tailwindcss.com/docs/adding-custom-styles#using-arbitrary-values).

#### [How does this even work?](#how-does-this-even-work)

Tailwind CSS isn't one big static stylesheet like you might be used to with other CSS frameworks — it generates the CSS needed based on the classes you're actually using when you compile your CSS.

It does this by scanning all of the files in your project looking for any symbol that looks like it could be a class name:

Button.jsx

```
export default function Button({ size, children }) {  let sizeClasses = {    md: "px-4py-2rounded-mdtext-base",    lg: "px-5py-3rounded-lgtext-lg",  }[size];  return (    <button type="button" className={`font-bold${sizeClasses}`}>      {children}    </button>  );}
```

After it's found all of the potential classes, Tailwind generates the CSS for each one and compiles it all into one stylesheet of just the styles you actually need.

Since the CSS is generated based on the class name, Tailwind can recognize classes using arbitrary values like 
```
bg-[#316ff6]
```
 and generate the necessary CSS, even when the value isn't part of your theme.

Learn more about how this works in [detecting classes in source files](https://tailwindcss.com/docs/detecting-classes-in-source-files).

### [Complex selectors](#complex-selectors)

Sometimes you need to style an element under a combination of conditions, for example in dark mode, at a specific breakpoint, when hovered, and when the element has a specific data attribute.

Here's an example of what that looks like with Tailwind:

HTML

```
<button class="dark:lg:data-current:hover:bg-indigo-600 ...">  <!-- ... --></button>
```

Simplified CSS

```
@media (prefers-color-scheme: dark) and (width >= 64rem) {  button[data-current]:hover {    background-color: var(--color-indigo-600);  }}
```

Tailwind also supports things like 
```
group-hover
```
, which let you style an element when a specific parent is hovered:

HTML

```
<a href="#" class="group rounded-lg p-8">  <!-- ... -->  <span class="group-hover:underline">Read more…</span></a>
```

Simplified CSS

```
@media (hover: hover) {  a:hover span {    text-decoration-line: underline;  }}
```

This 
```
group-*
```
 syntax works with other variants too, like 
```
group-focus
```
, 
```
group-active
```
, and [many more](https://tailwindcss.com/docs/hover-focus-and-other-states#styling-based-on-parent-state).

For really complex scenarios _(especially when styling HTML you don't control)_, Tailwind supports [arbitrary variants](https://tailwindcss.com/docs/adding-custom-styles#arbitrary-variants) which let you write any selector you want, directly in a class name:

HTML

```
<div class="[&>[data-active]+span]:text-blue-600 ...">  <span data-active><!-- ... --></span>  <span>This text will be blue</span></div>
```

Simplified CSS

```
div > [data-active] + span {  color: var(--color-blue-600);}
```

### [When to use inline styles](#when-to-use-inline-styles)

Inline styles are still very useful in Tailwind CSS projects, particularly when a value is coming from a dynamic source like a database or API:

branded-button.jsx

```
export function BrandedButton({ buttonColor, textColor, children }) {  return (    <button      style={{        backgroundColor: buttonColor,        color: textColor,      }}      className="rounded-md px-3 py-1.5 font-medium"    >      {children}    </button>  );}
```

You might also reach for an inline style for very complicated arbitrary values that are difficult to read when formatted as a class name:

HTML

```
<div class="grid-[2fr_max(0,var(--gutter-width))_calc(var(--gutter-width)+10px)]"><div style="grid-template-columns: 2fr max(0, var(--gutter-width)) calc(var(--gutter-width) + 10px)">  <!-- ... --></div>
```

Another useful pattern is setting CSS variables based on dynamic sources using inline styles, then referencing those variables with utility classes:

branded-button.jsx

```
export function BrandedButton({ buttonColor, buttonColorHover, textColor, children }) {  return (    <button      style={{        "--bg-color": buttonColor,        "--bg-color-hover": buttonColorHover,        "--text-color": textColor,      }}      className="bg-(--bg-color)text-(--text-color)hover:bg-(--bg-color-hover) ..."    >      {children}    </button>  );}
```

## [Managing duplication](#managing-duplication)

When you build entire projects with just utility classes, you'll inevitably find yourself repeating certain patterns to recreate the same design in different places.

For example, here the utility classes for each avatar image are repeated five separate times:

Don't panic! In practice this isn't the problem you might be worried it is, and the strategies for dealing with it are things you already do every day.

### [Using loops](#using-loops)

A lot of the time a design element that shows up more than once in the rendered page is only actually authored once because the actual markup is rendered in a loop.

For example, the duplicate avatars at the beginning of this guide would almost certainly be rendered in a loop in a real project:

When elements are rendered in a loop like this, the actual class list is only written once so there's no actual duplication problem to solve.

### [Using multi-cursor editing](#using-multi-cursor-editing)

When duplication is localized to a group of elements in a single file, the easiest way to deal with it is to use [multi-cursor editing](https://code.visualstudio.com/docs/editor/codebasics#_multiple-selections-multicursor) to quickly select and edit the class list for each element at once:

[Home](#/dashboard)[Team](#/team)[Projects](#/projects)[Reports](#/reports)

```
<nav class="flex justify-center space-x-4">  <a href="/dashboard" class="font-bold rounded-lg px-3 py-2 text-gray-700 hover:bg-gray-100 hover:text-gray-900">    Home  </a>  <a href="/team" class="font-bold rounded-lg px-3 py-2 text-gray-700 hover:bg-gray-100 hover:text-gray-900">    Team  </a>  <a href="/projects" class="font-bold rounded-lg px-3 py-2 text-gray-700 hover:bg-gray-100 hover:text-gray-900">    Projects  </a>  <a href="/reports" class="font-bold rounded-lg px-3 py-2 text-gray-700 hover:bg-gray-100 hover:text-gray-900">    Reports  </a></nav>
```

You'd be surprised at how often this ends up being the best solution. If you can quickly edit all of the duplicated class lists simultaneously, there's no benefit to introducing any additional abstraction.

### [Using components](#using-components)

If you need to reuse some styles across multiple files, the best strategy is to create a _component_ if you're using a front-end framework like React, Svelte, or Vue, or a _template partial_ if you're using a templating language like Blade, ERB, Twig, or Nunjucks.

![Beach](https://images.unsplash.com/photo-1452784444945-3f422708fe5e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=512&q=80)

Private Villa

$299 USD per night

```
export function VacationCard({ img, imgAlt, eyebrow, title, pricing, url }) {  return (    <div>      <img className="rounded-lg" src={img} alt={imgAlt} />      <div className="mt-4">        <div className="text-xs font-bold text-sky-500">{eyebrow}</div>        <div className="mt-1 font-bold text-gray-700">          <a href={url} className="hover:underline">            {title}          </a>        </div>        <div className="mt-2 text-sm text-gray-600">{pricing}</div>      </div>    </div>  );}
```

Now you can use this component in as many places as you like, while still having a single source of truth for the styles so they can easily be updated together in one place.

### [Using custom CSS](#using-custom-css)

If you're using a templating language like ERB or Twig instead of something like React or Vue, creating a template partial for something as small as a button can feel like overkill compared to a simple CSS class like 
```
btn
```
.

While it's highly recommended that you create proper template partials for more complex components, writing some custom CSS is totally fine when a template partial feels heavy-handed.

Here's what a 
```
btn-primary
```
 class might look like, using [theme variables](https://tailwindcss.com/docs/theme#with-custom-css) to keep the design consistent:

HTML

```
<button class="btn-primary">Save changes</button>
```

CSS

```
@import "tailwindcss";@layer components {  .btn-primary {    border-radius: calc(infinity * 1px);    background-color: var(--color-violet-500);    padding-inline: --spacing(5);    padding-block: --spacing(2);    font-weight: var(--font-weight-semibold);    color: var(--color-white);    box-shadow: var(--shadow-md);    &:hover {      @media (hover: hover) {        background-color: var(--color-violet-700);      }    }  }}
```

Again though, for anything that's more complicated than just a single HTML element, we highly recommend using template partials so the styles and structure can be encapsulated in one place.

## [Managing style conflicts](#managing-style-conflicts)

### [Conflicting utility classes](#conflicting-utility-classes)

When you add two classes that target the same CSS property, the class that appears later in the stylesheet wins. So in this example, the element will receive 
```
display: grid
```
 even though 
```
flex
```
 comes last in the actual 
```
class
```
 attribute:

HTML

```
<div class="grid flex">  <!-- ... --></div>
```

CSS

```
.flex {  display: flex;}.grid {  display: grid;}
```

In general, you should just never add two conflicting classes to the same element — only ever add the one you actually want to take effect:

example.jsx

```
export function Example({ gridLayout }) {  return <div className={gridLayout ? "grid" : "flex"}>{/* ... */}</div>;}
```

Using component-based libraries like React or Vue, this often means exposing specific props for styling customizations instead of letting consumers add extra classes from outside of a component, since those styles will often conflict.

### [Using the important modifier](#using-the-important-modifier)

When you really need to force a specific utility class to take effect and have no other means of managing the specificity, you can add 
```
!
```
 to the end of the class name to make all of the declarations 
```
!important
```
:

HTML

```
<div class="bg-teal-500 bg-red-500!">  <!-- ... --></div>
```

Generated CSS

```
.bg-red-500\! {  background-color: var(--color-red-500)!important;}.bg-teal-500 {  background-color: var(--color-teal-500);}
```

### [Using the important flag](#using-the-important-flag)

If you're adding Tailwind to a project that has existing complex CSS with high specificity rules, you can use the 
```
important
```
 flag when importing Tailwind to mark _all_ utilities as 
```
!important
```
:

app.css

```
@import "tailwindcss"important;
```

Compiled CSS

```
@layer utilities {  .flex {    display: flex !important;  }  .gap-4 {    gap: 1rem!important;  }  .underline {    text-decoration-line: underline !important;  }}
```

### [Using the prefix option](#using-the-prefix-option)

If your project has class names that conflict with Tailwind CSS utilities, you can prefix all Tailwind-generated classes and CSS variables using the 
```
prefix
```
 option:

app.css

```
@import "tailwindcss" prefix(tw);
```

Compiled CSS

```
@layer theme {  :root {    --tw-color-red-500: oklch(0.637 0.237 25.331);  }}@layer utilities {  .tw\:text-red-500 {    color: var(--tw-color-red-500);  }}
```
</file>

<file path="docs/Theme_variables_-_Core_concepts_-_Tailwind_CSS.md">
# Theme variables - Core concept

Using utility classes as an API for your design tokens.

## [Overview](#overview)

Tailwind is a framework for building custom designs, and different designs need different typography, colors, shadows, breakpoints, and more.

These low-level design decisions are often called _design tokens_, and in Tailwind projects you store those values in _theme variables_.

### [What are theme variables?](#what-are-theme-variables)

Theme variables are special CSS variables defined using the 
```
@theme
```
 directive that influence which utility classes exist in your project.

For example, you can add a new color to your project by defining a theme variable like 
```
--color-mint-500
```
:

app.css

```
@import "tailwindcss";@theme {  --color-mint-500: oklch(0.72 0.11 178);}
```

Now you can use utility classes like 
```
bg-mint-500
```
, 
```
text-mint-500
```
, or 
```
fill-mint-500
```
 in your HTML:

HTML

```
<div class="bg-mint-500">  <!-- ... --></div>
```

Tailwind also generates regular CSS variables for your theme variables so you can reference your design tokens in arbitrary values or inline styles:

HTML

```
<div style="background-color: var(--color-mint-500)">  <!-- ... --></div>
```

Learn more about how theme variables map to different utility classes in the [theme variable namespaces](#theme-variable-namespaces) documentation.

#### [Why 
```
@theme
```
 instead of 
```
:root
```
?](#why-theme-instead-of-root)

Theme variables aren't _just_ CSS variables — they also instruct Tailwind to create new utility classes that you can use in your HTML.

Since they do more than regular CSS variables, Tailwind uses special syntax so that defining theme variables is always explicit. Theme variables are also required to be defined top-level and not nested under other selectors or media queries, and using a special syntax makes it possible to enforce that.

Defining regular CSS variables with 
```
:root
```
 can still be useful in Tailwind projects when you want to define a variable that isn't meant to be connected to a utility class. Use 
```
@theme
```
 when you want a design token to map directly to a utility class, and use 
```
:root
```
 for defining regular CSS variables that shouldn't have corresponding utility classes.

### [Relationship to utility classes](#relationship-to-utility-classes)

Some utility classes in Tailwind like 
```
flex
```
 and 
```
object-cover
```
 are static, and are always the same from project to project. But many others are driven by theme variables, and only exist because of the theme variables you've defined.

For example, theme variables defined in the 
```
--font-*
```
 namespace determine all of the 
```
font-family
```
 utilities that exist in a project:

./node\_modules/tailwindcss/theme.css

```
@theme {  --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";  --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;  /* ... */}
```

The 
```
font-sans
```
, 
```
font-serif
```
, and 
```
font-mono
```
 utilities only exist by default because Tailwind's default theme defines the 
```
--font-sans
```
, 
```
--font-serif
```
, and 
```
--font-mono
```
 theme variables.

If another theme variable like 
```
--font-poppins
```
 were defined, a 
```
font-poppins
```
 utility class would become available to go with it:

app.css

```
@import "tailwindcss";@theme {  --font-poppins: Poppins, sans-serif;}
```

HTML

```
<h1 class="font-poppins">This headline will use Poppins.</h1>
```

You can name your theme variables whatever you want within these namespaces, and a corresponding utility with the same name will become available to use in your HTML.

#### [Relationship to variants](#relationship-to-variants)

Some theme variables are used to define variants rather than utilities. For example theme variables in the 
```
--breakpoint-*
```
 namespace determine which responsive breakpoint variants exist in your project:

app.css

```
@import "tailwindcss";@theme {  --breakpoint-3xl: 120rem;}
```

Now you can use the 
```
3xl:*
```
 variant to only trigger a utility when the viewport is 120rem or wider:

HTML

```
<div class="3xl:grid-cols-6 grid grid-cols-2 md:grid-cols-4">  <!-- ... --></div>
```

Learn more about how theme variables map to different utility classes and variants in the [theme variable namespaces](#theme-variable-namespaces) documentation.

### [Theme variable namespaces](#theme-variable-namespaces)

Theme variables are defined in _namespaces_ and each namespace corresponds to one or more utility class or variant APIs.

Defining new theme variables in these namespaces will make new corresponding utilities and variants available in your project:

 Namespace | Utility classes |
| --- | --- |
 
```
--color-*
```
 | Color utilities like 
```
bg-red-500
```
, 
```
text-sky-300
```
, and many more |
 
```
--font-*
```
 | Font family utilities like 
```
font-sans
```
 |
 
```
--text-*
```
 | Font size utilities like 
```
text-xl
```
 |
 
```
--font-weight-*
```
 | Font weight utilities like 
```
font-bold
```
 |
 
```
--tracking-*
```
 | Letter spacing utilities like 
```
tracking-wide
```
 |
 
```
--leading-*
```
 | Line height utilities like 
```
leading-tight
```
 |
 
```
--breakpoint-*
```
 | Responsive breakpoint variants like 
```
sm:*
```
 |
 
```
--container-*
```
 | Container query variants like 
```
@sm:*
```
 and size utilities like 
```
max-w-md
```
 |
 
```
--spacing-*
```
 | Spacing and sizing utilities like 
```
px-4
```
, 
```
max-h-16
```
, and many more |
 
```
--radius-*
```
 | Border radius utilities like 
```
rounded-sm
```
 |
 
```
--shadow-*
```
 | Box shadow utilities like 
```
shadow-md
```
 |
 
```
--inset-shadow-*
```
 | Inset box shadow utilities like 
```
inset-shadow-xs
```
 |
 
```
--drop-shadow-*
```
 | Drop shadow filter utilities like 
```
drop-shadow-md
```
 |
 
```
--blur-*
```
 | Blur filter utilities like 
```
blur-md
```
 |
 
```
--perspective-*
```
 | Perspective utilities like 
```
perspective-near
```
 |
 
```
--aspect-*
```
 | Aspect ratio utilities like 
```
aspect-video
```
 |
 
```
--ease-*
```
 | Transition timing function utilities like 
```
ease-out
```
 |
 
```
--animate-*
```
 | Animation utilities like 
```
animate-spin
```
 |

For a list of all of the default theme variables, see the [default theme variable reference](#default-theme-variable-reference).

### [Default theme variables](#default-theme-variables)

When you import 
```
tailwindcss
```
 at the top of your CSS file, it includes a set of default theme variables to get you started.

Here's what you're actually importing when you import 
```
tailwindcss
```
:

node\_modules/tailwindcss/index.css

```
@layer theme, base, components, utilities;@import "./theme.css" layer(theme);@import "./preflight.css" layer(base);@import "./utilities.css" layer(utilities);
```

That 
```
theme.css
```
 file includes the default color palette, type scale, shadows, fonts, and more:

node\_modules/tailwindcss/theme.css

```
@theme {  --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";  --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;  --color-red-50: oklch(0.971 0.013 17.38);  --color-red-100: oklch(0.936 0.032 17.717);  --color-red-200: oklch(0.885 0.062 18.334);  /* ... */  --shadow-2xs: 0 1px rgb(0 0 0 / 0.05);  --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);  --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);  /* ... */}
```

This is why utilities like 
```
bg-red-200
```
, 
```
font-serif
```
, and 
```
shadow-sm
```
 exist out of the box — they're driven by the default theme, not hardcoded into the framework like 
```
flex-col
```
 or 
```
pointer-events-none
```
.

For a list of all of the default theme variables, see the [default theme variable reference](#default-theme-variable-reference).

## [Customizing your theme](#customizing-your-theme)

The default theme variables are very general purpose and suitable for building dramatically different designs, but they are still just a starting point. It's very common to customize things like the color palette, fonts, and shadows to build exactly the design you have in mind.

### [Extending the default theme](#extending-the-default-theme)

Use 
```
@theme
```
 to define new theme variables and extend the default theme:

app.css

```
@import "tailwindcss";@theme {  --font-script: Great Vibes, cursive;}
```

This makes a new 
```
font-script
```
 utility class available that you can use in your HTML, just like the default 
```
font-sans
```
 or 
```
font-mono
```
 utilities:

HTML

```
<p class="font-script">This will use the Great Vibes font family.</p>
```

Learn more about how theme variables map to different utility classes and variants in the [theme variable namespaces](#theme-variable-namespaces) documentation.

### [Overriding the default theme](#overriding-the-default-theme)

Override a default theme variable value by redefining it within 
```
@theme
```
:

app.css

```
@import "tailwindcss";@theme {  --breakpoint-sm: 30rem;}
```

Now the 
```
sm:*
```
 variant will trigger at 30rem instead of the default 40rem viewport size:

HTML

```
<div class="grid grid-cols-1 sm:grid-cols-3">  <!-- ... --></div>
```

To completely override an entire namespace in the default theme, set the entire namespace to 
```
initial
```
 using the special asterisk syntax:

app.css

```
@import "tailwindcss";@theme {  --color-*: initial;  --color-white: #fff;  --color-purple: #3f3cbb;  --color-midnight: #121063;  --color-tahiti: #3ab7bf;  --color-bermuda: #78dcca;}
```

When you do this, all of the default utilities that use that namespace _(like 
```
bg-red-500
```
)_ will be removed, and only your custom values _(like 
```
bg-midnight
```
)_ will be available.

Learn more about how theme variables map to different utility classes and variants in the [theme variable namespaces](#theme-variable-namespaces) documentation.

### [Using a custom theme](#using-a-custom-theme)

To completely disable the default theme and use only custom values, set the global theme variable namespace to 
```
initial
```
:

app.css

```
@import "tailwindcss";@theme {  --*: initial;  --spacing: 4px;  --font-body: Inter, sans-serif;  --color-lagoon: oklch(0.72 0.11 221.19);  --color-coral: oklch(0.74 0.17 40.24);  --color-driftwood: oklch(0.79 0.06 74.59);  --color-tide: oklch(0.49 0.08 205.88);  --color-dusk: oklch(0.82 0.15 72.09);}
```

Now none of the default utility classes that are driven by theme variables will be available, and you'll only be able to use utility classes matching your custom theme variables like 
```
font-body
```
 and 
```
text-dusk
```
.

### [Defining animation keyframes](#defining-animation-keyframes)

Define the 
```
@keyframes
```
 rules for your 
```
--animate-*
```
 theme variables within 
```
@theme
```
 to include them in your generated CSS:

app.css

```
@import "tailwindcss";@theme {  --animate-fade-in-scale: fade-in-scale 0.3s ease-out;  @keyframes fade-in-scale {    0% {      opacity: 0;      transform: scale(0.95);    }    100% {      opacity: 1;      transform: scale(1);    }  }}
```

If you want your custom 
```
@keyframes
```
 rules to always be included even when not adding an 
```
--animate-*
```
 theme variable, define them outside of 
```
@theme
```
 instead.

### [Referencing other variables](#referencing-other-variables)

When defining theme variables that reference other variables, use the 
```
inline
```
 option:

app.css

```
@import "tailwindcss";@themeinline{  --font-sans: var(--font-inter);}
```

Using the 
```
inline
```
 option, the utility class will use the theme variable _value_ instead of referencing the actual theme variable:

dist.css

```
.font-sans {  font-family: var(--font-inter);}
```

Without using 
```
inline
```
, your utility classes might resolve to unexpected values because of how variables are resolved in CSS.

For example, this text will fall back to 
```
sans-serif
```
 instead of using 
```
Inter
```
 like you might expect:

HTML

```
<div id="parent" style="--font-sans: var(--font-inter, sans-serif);">  <div id="child" style="--font-inter: Inter; font-family: var(--font-sans);">    This text will use the sans-serif font, not Inter.  </div></div>
```

This happens because 
```
var(--font-sans)
```
 is resolved where 
```
--font-sans
```
 is defined _(on 
```
#parent
```
)_, and 
```
--font-inter
```
 has no value there since it's not defined until deeper in the tree _(on 
```
#child
```
)_.

### [Generating all CSS variables](#generating-all-css-variables)

By default only used CSS variables will be generated in the final CSS output. If you want to always generate all CSS variables, you can use the 
```
static
```
 theme option:

app.css

```
@import "tailwindcss";@themestatic{  --color-primary: var(--color-red-500);  --color-secondary: var(--color-blue-500);}
```

### [Sharing across projects](#sharing-across-projects)

Since theme variables are defined in CSS, sharing them across projects is just a matter of throwing them into their own CSS file that you can import in each project:

./packages/brand/theme.css

```
@theme {  --*: initial;  --spacing: 4px;  --font-body: Inter, sans-serif;  --color-lagoon: oklch(0.72 0.11 221.19);  --color-coral: oklch(0.74 0.17 40.24);  --color-driftwood: oklch(0.79 0.06 74.59);  --color-tide: oklch(0.49 0.08 205.88);  --color-dusk: oklch(0.82 0.15 72.09);}
```

Then you can use 
```
@import
```
 to include your theme variables in other projects:

./packages/admin/app.css

```
@import "tailwindcss";@import "../brand/theme.css";
```

You can put shared theme variables like this in their own package in monorepo setups or even publish them to NPM and import them just like any other third-party CSS files.

## [Using your theme variables](#using-your-theme-variables)

All of your theme variables are turned into regular CSS variables when you compile your CSS:

dist.css

```
:root {  --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";  --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;  --color-red-50: oklch(0.971 0.013 17.38);  --color-red-100: oklch(0.936 0.032 17.717);  --color-red-200: oklch(0.885 0.062 18.334);  /* ... */  --shadow-2xs: 0 1px rgb(0 0 0 / 0.05);  --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);  --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);  /* ... */}
```

This makes it easy to reference all of your design tokens in any of your custom CSS or inline styles.

### [With custom CSS](#with-custom-css)

Use your theme variables to get access to your design tokens when you're writing custom CSS that needs to use the same values:

app.css

```
@import "tailwindcss";@layer components {  .typography {    p {      font-size: var(--text-base);      color: var(--color-gray-700);    }    h1 {      font-size: var(--text-2xl--line-height);      font-weight: var(--font-weight-semibold);      color: var(--color-gray-950);    }    h2 {      font-size: var(--text-xl);      font-weight: var(--font-weight-semibold);      color: var(--color-gray-950);    }  }}
```

This is often useful when styling HTML you don't control, like Markdown content coming from a database or API and rendered to HTML.

### [With arbitrary values](#with-arbitrary-values)

Using theme variables in arbitrary values can be useful, especially in combination with the 
```
calc()
```
 function.

HTML

```
<div class="relative rounded-xl">  <div class="absolute inset-px rounded-[calc(var(--radius-xl)-1px)]">    <!-- ... -->  </div>  <!-- ... --></div>
```

In the above example, we're subtracting 1px from the 
```
--radius-xl
```
 value on a nested inset element to make sure it has a concentric border radius.

### [Referencing in JavaScript](#referencing-in-javascript)

Most of the time when you need to reference your theme variables in JS you can just use the CSS variables directly, just like any other CSS value.

For example, the popular [Motion](https://motion.dev/docs/react-quick-start) library for React lets you animate to and from CSS variable values:

JSX

```
<motion.div animate={{ backgroundColor: "var(--color-blue-500)" }} />
```

If you need access to a resolved CSS variable value in JS, you can use 
```
getComputedStyle
```
 to get the value of a theme variable on the document root:

spaghetti.js

```
let styles = getComputedStyle(document.documentElement);let shadow = styles.getPropertyValue("--shadow-xl");
```

## [Default theme variable reference](#default-theme-variable-reference)

For reference, here's a complete list of the theme variables included by default when you import Tailwind CSS into your project:

tailwindcss/theme.css

```
@theme {  --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";  --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;  --color-red-50: oklch(97.1% 0.013 17.38);  --color-red-100: oklch(93.6% 0.032 17.717);  --color-red-200: oklch(88.5% 0.062 18.334);  --color-red-300: oklch(80.8% 0.114 19.571);  --color-red-400: oklch(70.4% 0.191 22.216);  --color-red-500: oklch(63.7% 0.237 25.331);  --color-red-600: oklch(57.7% 0.245 27.325);  --color-red-700: oklch(50.5% 0.213 27.518);  --color-red-800: oklch(44.4% 0.177 26.899);  --color-red-900: oklch(39.6% 0.141 25.723);  --color-red-950: oklch(25.8% 0.092 26.042);  --color-orange-50: oklch(98% 0.016 73.684);  --color-orange-100: oklch(95.4% 0.038 75.164);  --color-orange-200: oklch(90.1% 0.076 70.697);  --color-orange-300: oklch(83.7% 0.128 66.29);  --color-orange-400: oklch(75% 0.183 55.934);  --color-orange-500: oklch(70.5% 0.213 47.604);  --color-orange-600: oklch(64.6% 0.222 41.116);  --color-orange-700: oklch(55.3% 0.195 38.402);  --color-orange-800: oklch(47% 0.157 37.304);  --color-orange-900: oklch(40.8% 0.123 38.172);  --color-orange-950: oklch(26.6% 0.079 36.259);  --color-amber-50: oklch(98.7% 0.022 95.277);  --color-amber-100: oklch(96.2% 0.059 95.617);  --color-amber-200: oklch(92.4% 0.12 95.746);  --color-amber-300: oklch(87.9% 0.169 91.605);  --color-amber-400: oklch(82.8% 0.189 84.429);  --color-amber-500: oklch(76.9% 0.188 70.08);  --color-amber-600: oklch(66.6% 0.179 58.318);  --color-amber-700: oklch(55.5% 0.163 48.998);  --color-amber-800: oklch(47.3% 0.137 46.201);  --color-amber-900: oklch(41.4% 0.112 45.904);  --color-amber-950: oklch(27.9% 0.077 45.635);  --color-yellow-50: oklch(98.7% 0.026 102.212);  --color-yellow-100: oklch(97.3% 0.071 103.193);  --color-yellow-200: oklch(94.5% 0.129 101.54);  --color-yellow-300: oklch(90.5% 0.182 98.111);  --color-yellow-400: oklch(85.2% 0.199 91.936);  --color-yellow-500: oklch(79.5% 0.184 86.047);  --color-yellow-600: oklch(68.1% 0.162 75.834);  --color-yellow-700: oklch(55.4% 0.135 66.442);  --color-yellow-800: oklch(47.6% 0.114 61.907);  --color-yellow-900: oklch(42.1% 0.095 57.708);  --color-yellow-950: oklch(28.6% 0.066 53.813);  --color-lime-50: oklch(98.6% 0.031 120.757);  --color-lime-100: oklch(96.7% 0.067 122.328);  --color-lime-200: oklch(93.8% 0.127 124.321);  --color-lime-300: oklch(89.7% 0.196 126.665);  --color-lime-400: oklch(84.1% 0.238 128.85);  --color-lime-500: oklch(76.8% 0.233 130.85);  --color-lime-600: oklch(64.8% 0.2 131.684);  --color-lime-700: oklch(53.2% 0.157 131.589);  --color-lime-800: oklch(45.3% 0.124 130.933);  --color-lime-900: oklch(40.5% 0.101 131.063);  --color-lime-950: oklch(27.4% 0.072 132.109);  --color-green-50: oklch(98.2% 0.018 155.826);  --color-green-100: oklch(96.2% 0.044 156.743);  --color-green-200: oklch(92.5% 0.084 155.995);  --color-green-300: oklch(87.1% 0.15 154.449);  --color-green-400: oklch(79.2% 0.209 151.711);  --color-green-500: oklch(72.3% 0.219 149.579);  --color-green-600: oklch(62.7% 0.194 149.214);  --color-green-700: oklch(52.7% 0.154 150.069);  --color-green-800: oklch(44.8% 0.119 151.328);  --color-green-900: oklch(39.3% 0.095 152.535);  --color-green-950: oklch(26.6% 0.065 152.934);  --color-emerald-50: oklch(97.9% 0.021 166.113);  --color-emerald-100: oklch(95% 0.052 163.051);  --color-emerald-200: oklch(90.5% 0.093 164.15);  --color-emerald-300: oklch(84.5% 0.143 164.978);  --color-emerald-400: oklch(76.5% 0.177 163.223);  --color-emerald-500: oklch(69.6% 0.17 162.48);  --color-emerald-600: oklch(59.6% 0.145 163.225);  --color-emerald-700: oklch(50.8% 0.118 165.612);  --color-emerald-800: oklch(43.2% 0.095 166.913);  --color-emerald-900: oklch(37.8% 0.077 168.94);  --color-emerald-950: oklch(26.2% 0.051 172.552);  --color-teal-50: oklch(98.4% 0.014 180.72);  --color-teal-100: oklch(95.3% 0.051 180.801);  --color-teal-200: oklch(91% 0.096 180.426);  --color-teal-300: oklch(85.5% 0.138 181.071);  --color-teal-400: oklch(77.7% 0.152 181.912);  --color-teal-500: oklch(70.4% 0.14 182.503);  --color-teal-600: oklch(60% 0.118 184.704);  --color-teal-700: oklch(51.1% 0.096 186.391);  --color-teal-800: oklch(43.7% 0.078 188.216);  --color-teal-900: oklch(38.6% 0.063 188.416);  --color-teal-950: oklch(27.7% 0.046 192.524);  --color-cyan-50: oklch(98.4% 0.019 200.873);  --color-cyan-100: oklch(95.6% 0.045 203.388);  --color-cyan-200: oklch(91.7% 0.08 205.041);  --color-cyan-300: oklch(86.5% 0.127 207.078);  --color-cyan-400: oklch(78.9% 0.154 211.53);  --color-cyan-500: oklch(71.5% 0.143 215.221);  --color-cyan-600: oklch(60.9% 0.126 221.723);  --color-cyan-700: oklch(52% 0.105 223.128);  --color-cyan-800: oklch(45% 0.085 224.283);  --color-cyan-900: oklch(39.8% 0.07 227.392);  --color-cyan-950: oklch(30.2% 0.056 229.695);  --color-sky-50: oklch(97.7% 0.013 236.62);  --color-sky-100: oklch(95.1% 0.026 236.824);  --color-sky-200: oklch(90.1% 0.058 230.902);  --color-sky-300: oklch(82.8% 0.111 230.318);  --color-sky-400: oklch(74.6% 0.16 232.661);  --color-sky-500: oklch(68.5% 0.169 237.323);  --color-sky-600: oklch(58.8% 0.158 241.966);  --color-sky-700: oklch(50% 0.134 242.749);  --color-sky-800: oklch(44.3% 0.11 240.79);  --color-sky-900: oklch(39.1% 0.09 240.876);  --color-sky-950: oklch(29.3% 0.066 243.157);  --color-blue-50: oklch(97% 0.014 254.604);  --color-blue-100: oklch(93.2% 0.032 255.585);  --color-blue-200: oklch(88.2% 0.059 254.128);  --color-blue-300: oklch(80.9% 0.105 251.813);  --color-blue-400: oklch(70.7% 0.165 254.624);  --color-blue-500: oklch(62.3% 0.214 259.815);  --color-blue-600: oklch(54.6% 0.245 262.881);  --color-blue-700: oklch(48.8% 0.243 264.376);  --color-blue-800: oklch(42.4% 0.199 265.638);  --color-blue-900: oklch(37.9% 0.146 265.522);  --color-blue-950: oklch(28.2% 0.091 267.935);  --color-indigo-50: oklch(96.2% 0.018 272.314);  --color-indigo-100: oklch(93% 0.034 272.788);  --color-indigo-200: oklch(87% 0.065 274.039);  --color-indigo-300: oklch(78.5% 0.115 274.713);  --color-indigo-400: oklch(67.3% 0.182 276.935);  --color-indigo-500: oklch(58.5% 0.233 277.117);  --color-indigo-600: oklch(51.1% 0.262 276.966);  --color-indigo-700: oklch(45.7% 0.24 277.023);  --color-indigo-800: oklch(39.8% 0.195 277.366);  --color-indigo-900: oklch(35.9% 0.144 278.697);  --color-indigo-950: oklch(25.7% 0.09 281.288);  --color-violet-50: oklch(96.9% 0.016 293.756);  --color-violet-100: oklch(94.3% 0.029 294.588);  --color-violet-200: oklch(89.4% 0.057 293.283);  --color-violet-300: oklch(81.1% 0.111 293.571);  --color-violet-400: oklch(70.2% 0.183 293.541);  --color-violet-500: oklch(60.6% 0.25 292.717);  --color-violet-600: oklch(54.1% 0.281 293.009);  --color-violet-700: oklch(49.1% 0.27 292.581);  --color-violet-800: oklch(43.2% 0.232 292.759);  --color-violet-900: oklch(38% 0.189 293.745);  --color-violet-950: oklch(28.3% 0.141 291.089);  --color-purple-50: oklch(97.7% 0.014 308.299);  --color-purple-100: oklch(94.6% 0.033 307.174);  --color-purple-200: oklch(90.2% 0.063 306.703);  --color-purple-300: oklch(82.7% 0.119 306.383);  --color-purple-400: oklch(71.4% 0.203 305.504);  --color-purple-500: oklch(62.7% 0.265 303.9);  --color-purple-600: oklch(55.8% 0.288 302.321);  --color-purple-700: oklch(49.6% 0.265 301.924);  --color-purple-800: oklch(43.8% 0.218 303.724);  --color-purple-900: oklch(38.1% 0.176 304.987);  --color-purple-950: oklch(29.1% 0.149 302.717);  --color-fuchsia-50: oklch(97.7% 0.017 320.058);  --color-fuchsia-100: oklch(95.2% 0.037 318.852);  --color-fuchsia-200: oklch(90.3% 0.076 319.62);  --color-fuchsia-300: oklch(83.3% 0.145 321.434);  --color-fuchsia-400: oklch(74% 0.238 322.16);  --color-fuchsia-500: oklch(66.7% 0.295 322.15);  --color-fuchsia-600: oklch(59.1% 0.293 322.896);  --color-fuchsia-700: oklch(51.8% 0.253 323.949);  --color-fuchsia-800: oklch(45.2% 0.211 324.591);  --color-fuchsia-900: oklch(40.1% 0.17 325.612);  --color-fuchsia-950: oklch(29.3% 0.136 325.661);  --color-pink-50: oklch(97.1% 0.014 343.198);  --color-pink-100: oklch(94.8% 0.028 342.258);  --color-pink-200: oklch(89.9% 0.061 343.231);  --color-pink-300: oklch(82.3% 0.12 346.018);  --color-pink-400: oklch(71.8% 0.202 349.761);  --color-pink-500: oklch(65.6% 0.241 354.308);  --color-pink-600: oklch(59.2% 0.249 0.584);  --color-pink-700: oklch(52.5% 0.223 3.958);  --color-pink-800: oklch(45.9% 0.187 3.815);  --color-pink-900: oklch(40.8% 0.153 2.432);  --color-pink-950: oklch(28.4% 0.109 3.907);  --color-rose-50: oklch(96.9% 0.015 12.422);  --color-rose-100: oklch(94.1% 0.03 12.58);  --color-rose-200: oklch(89.2% 0.058 10.001);  --color-rose-300: oklch(81% 0.117 11.638);  --color-rose-400: oklch(71.2% 0.194 13.428);  --color-rose-500: oklch(64.5% 0.246 16.439);  --color-rose-600: oklch(58.6% 0.253 17.585);  --color-rose-700: oklch(51.4% 0.222 16.935);  --color-rose-800: oklch(45.5% 0.188 13.697);  --color-rose-900: oklch(41% 0.159 10.272);  --color-rose-950: oklch(27.1% 0.105 12.094);  --color-slate-50: oklch(98.4% 0.003 247.858);  --color-slate-100: oklch(96.8% 0.007 247.896);  --color-slate-200: oklch(92.9% 0.013 255.508);  --color-slate-300: oklch(86.9% 0.022 252.894);  --color-slate-400: oklch(70.4% 0.04 256.788);  --color-slate-500: oklch(55.4% 0.046 257.417);  --color-slate-600: oklch(44.6% 0.043 257.281);  --color-slate-700: oklch(37.2% 0.044 257.287);  --color-slate-800: oklch(27.9% 0.041 260.031);  --color-slate-900: oklch(20.8% 0.042 265.755);  --color-slate-950: oklch(12.9% 0.042 264.695);  --color-gray-50: oklch(98.5% 0.002 247.839);  --color-gray-100: oklch(96.7% 0.003 264.542);  --color-gray-200: oklch(92.8% 0.006 264.531);  --color-gray-300: oklch(87.2% 0.01 258.338);  --color-gray-400: oklch(70.7% 0.022 261.325);  --color-gray-500: oklch(55.1% 0.027 264.364);  --color-gray-600: oklch(44.6% 0.03 256.802);  --color-gray-700: oklch(37.3% 0.034 259.733);  --color-gray-800: oklch(27.8% 0.033 256.848);  --color-gray-900: oklch(21% 0.034 264.665);  --color-gray-950: oklch(13% 0.028 261.692);  --color-zinc-50: oklch(98.5% 0 0);  --color-zinc-100: oklch(96.7% 0.001 286.375);  --color-zinc-200: oklch(92% 0.004 286.32);  --color-zinc-300: oklch(87.1% 0.006 286.286);  --color-zinc-400: oklch(70.5% 0.015 286.067);  --color-zinc-500: oklch(55.2% 0.016 285.938);  --color-zinc-600: oklch(44.2% 0.017 285.786);  --color-zinc-700: oklch(37% 0.013 285.805);  --color-zinc-800: oklch(27.4% 0.006 286.033);  --color-zinc-900: oklch(21% 0.006 285.885);  --color-zinc-950: oklch(14.1% 0.005 285.823);  --color-neutral-50: oklch(98.5% 0 0);  --color-neutral-100: oklch(97% 0 0);  --color-neutral-200: oklch(92.2% 0 0);  --color-neutral-300: oklch(87% 0 0);  --color-neutral-400: oklch(70.8% 0 0);  --color-neutral-500: oklch(55.6% 0 0);  --color-neutral-600: oklch(43.9% 0 0);  --color-neutral-700: oklch(37.1% 0 0);  --color-neutral-800: oklch(26.9% 0 0);  --color-neutral-900: oklch(20.5% 0 0);  --color-neutral-950: oklch(14.5% 0 0);  --color-stone-50: oklch(98.5% 0.001 106.423);  --color-stone-100: oklch(97% 0.001 106.424);  --color-stone-200: oklch(92.3% 0.003 48.717);  --color-stone-300: oklch(86.9% 0.005 56.366);  --color-stone-400: oklch(70.9% 0.01 56.259);  --color-stone-500: oklch(55.3% 0.013 58.071);  --color-stone-600: oklch(44.4% 0.011 73.639);  --color-stone-700: oklch(37.4% 0.01 67.558);  --color-stone-800: oklch(26.8% 0.007 34.298);  --color-stone-900: oklch(21.6% 0.006 56.043);  --color-stone-950: oklch(14.7% 0.004 49.25);  --color-black: #000;  --color-white: #fff;  --spacing: 0.25rem;  --breakpoint-sm: 40rem;  --breakpoint-md: 48rem;  --breakpoint-lg: 64rem;  --breakpoint-xl: 80rem;  --breakpoint-2xl: 96rem;  --container-3xs: 16rem;  --container-2xs: 18rem;  --container-xs: 20rem;  --container-sm: 24rem;  --container-md: 28rem;  --container-lg: 32rem;  --container-xl: 36rem;  --container-2xl: 42rem;  --container-3xl: 48rem;  --container-4xl: 56rem;  --container-5xl: 64rem;  --container-6xl: 72rem;  --container-7xl: 80rem;  --text-xs: 0.75rem;  --text-xs--line-height: calc(1 / 0.75);  --text-sm: 0.875rem;  --text-sm--line-height: calc(1.25 / 0.875);  --text-base: 1rem;  --text-base--line-height: calc(1.5 / 1);  --text-lg: 1.125rem;  --text-lg--line-height: calc(1.75 / 1.125);  --text-xl: 1.25rem;  --text-xl--line-height: calc(1.75 / 1.25);  --text-2xl: 1.5rem;  --text-2xl--line-height: calc(2 / 1.5);  --text-3xl: 1.875rem;  --text-3xl--line-height: calc(2.25 / 1.875);  --text-4xl: 2.25rem;  --text-4xl--line-height: calc(2.5 / 2.25);  --text-5xl: 3rem;  --text-5xl--line-height: 1;  --text-6xl: 3.75rem;  --text-6xl--line-height: 1;  --text-7xl: 4.5rem;  --text-7xl--line-height: 1;  --text-8xl: 6rem;  --text-8xl--line-height: 1;  --text-9xl: 8rem;  --text-9xl--line-height: 1;  --font-weight-thin: 100;  --font-weight-extralight: 200;  --font-weight-light: 300;  --font-weight-normal: 400;  --font-weight-medium: 500;  --font-weight-semibold: 600;  --font-weight-bold: 700;  --font-weight-extrabold: 800;  --font-weight-black: 900;  --tracking-tighter: -0.05em;  --tracking-tight: -0.025em;  --tracking-normal: 0em;  --tracking-wide: 0.025em;  --tracking-wider: 0.05em;  --tracking-widest: 0.1em;  --leading-tight: 1.25;  --leading-snug: 1.375;  --leading-normal: 1.5;  --leading-relaxed: 1.625;  --leading-loose: 2;  --radius-xs: 0.125rem;  --radius-sm: 0.25rem;  --radius-md: 0.375rem;  --radius-lg: 0.5rem;  --radius-xl: 0.75rem;  --radius-2xl: 1rem;  --radius-3xl: 1.5rem;  --radius-4xl: 2rem;  --shadow-2xs: 0 1px rgb(0 0 0 / 0.05);  --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);  --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);  --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);  --inset-shadow-2xs: inset 0 1px rgb(0 0 0 / 0.05);  --inset-shadow-xs: inset 0 1px 1px rgb(0 0 0 / 0.05);  --inset-shadow-sm: inset 0 2px 4px rgb(0 0 0 / 0.05);  --drop-shadow-xs: 0 1px 1px rgb(0 0 0 / 0.05);  --drop-shadow-sm: 0 1px 2px rgb(0 0 0 / 0.15);  --drop-shadow-md: 0 3px 3px rgb(0 0 0 / 0.12);  --drop-shadow-lg: 0 4px 4px rgb(0 0 0 / 0.15);  --drop-shadow-xl: 0 9px 7px rgb(0 0 0 / 0.1);  --drop-shadow-2xl: 0 25px 25px rgb(0 0 0 / 0.15);  --text-shadow-2xs: 0px 1px 0px rgb(0 0 0 / 0.15);  --text-shadow-xs: 0px 1px 1px rgb(0 0 0 / 0.2);  --text-shadow-sm: 0px 1px 0px rgb(0 0 0 / 0.075), 0px 1px 1px rgb(0 0 0 / 0.075), 0px 2px 2px rgb(0 0 0 / 0.075);  --text-shadow-md: 0px 1px 1px rgb(0 0 0 / 0.1), 0px 1px 2px rgb(0 0 0 / 0.1), 0px 2px 4px rgb(0 0 0 / 0.1);  --text-shadow-lg: 0px 1px 2px rgb(0 0 0 / 0.1), 0px 3px 2px rgb(0 0 0 / 0.1), 0px 4px 8px rgb(0 0 0 / 0.1);  --blur-xs: 4px;  --blur-sm: 8px;  --blur-md: 12px;  --blur-lg: 16px;  --blur-xl: 24px;  --blur-2xl: 40px;  --blur-3xl: 64px;  --perspective-dramatic: 100px;  --perspective-near: 300px;  --perspective-normal: 500px;  --perspective-midrange: 800px;  --perspective-distant: 1200px;  --aspect-video: 16 / 9;  --ease-in: cubic-bezier(0.4, 0, 1, 1);  --ease-out: cubic-bezier(0, 0, 0.2, 1);  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);  --animate-spin: spin 1s linear infinite;  --animate-ping: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;  --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;  --animate-bounce: bounce 1s infinite;  @keyframes spin {    to {      transform: rotate(360deg);    }  }  @keyframes ping {    75%,    100% {      transform: scale(2);      opacity: 0;    }  }  @keyframes pulse {    50% {      opacity: 0.5;    }  }  @keyframes bounce {    0%,    100% {      transform: translateY(-25%);      animation-timing-function: cubic-bezier(0.8, 0, 1, 1);    }    50% {      transform: none;      animation-timing-function: cubic-bezier(0, 0, 0.2, 1);    }  }}
```
</file>

<file path="eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs['recommended-latest'],
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>cadence-2</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="package.json">
{
  "name": "cadence-2",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@codemirror/language": "^6.11.3",
    "@codemirror/state": "^6.5.2",
    "@codemirror/view": "^6.38.6",
    "@tailwindcss/vite": "^4.1.17",
    "@uiw/react-codemirror": "^4.25.3",
    "hyphen": "^1.10.6",
    "react": "^19.1.1",
    "react-dom": "^19.1.1"
  },
  "devDependencies": {
    "@eslint/js": "^9.36.0",
    "@types/hyphen": "^1.6.7",
    "@types/node": "^24.6.0",
    "@types/react": "^19.1.16",
    "@types/react-dom": "^19.1.9",
    "@vitejs/plugin-react": "^5.0.4",
    "autoprefixer": "^10.4.21",
    "eslint": "^9.36.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.22",
    "globals": "^16.4.0",
    "postcss": "^8.5.6",
    "tailwindcss": "^4.1.17",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.45.0",
    "vite": "^7.1.7"
  }
}
</file>

<file path="public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="README.md">
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```
</file>

<file path="src/App.css">
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}
</file>

<file path="src/App.tsx">
/**
 * Main App Component
 * 
 * Root component for the Cadence lyric editor application.
 */

import { useState, useCallback } from 'react';
import { LyricEditor } from './components/LyricEditor';
import { ErrorDisplay } from './components/ErrorDisplay';
import type { SyllableData } from './types';

const INITIAL_CONTENT = `[Verse 1]
Write your lyrics here
Each line will show syllable counts

[Chorus]
Try typing some words
Watch the syllable counter
See the markers appear

# This is a comment
# Comments start with #`;

function App() {
  const [errors, setErrors] = useState<string[]>([]);

  const handleSyllableUpdate = useCallback((_lineNumber: number, data: SyllableData) => {
    // Collect any errors from processing
    if (data.errors && data.errors.length > 0) {
      setErrors(prev => {
        const newErrors = [...prev, ...data.errors!];
        // Keep only the last 10 errors to avoid memory issues
        return newErrors.slice(-10);
      });
    }
  }, []);

  const handleDismissErrors = useCallback(() => {
    setErrors([]);
  }, []);

  return (
    <div className="flex flex-col h-screen bg-gray-50">
      {/* Header */}
      <header className="bg-white shadow-sm border-b border-gray-200">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
          <h1 className="text-2xl font-bold text-gray-900">
            Cadence
          </h1>
          <p className="text-sm text-gray-600 mt-1">
            Real-time Lyric Syllable Analyzer
          </p>
        </div>
      </header>

      {/* Error Display */}
      {errors.length > 0 && (
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2">
          <ErrorDisplay
            errors={errors}
            onDismiss={handleDismissErrors}
          />
        </div>
      )}

      {/* Main Editor */}
      <main className="flex-1 overflow-hidden">
        <div className="h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
          <div className="h-full bg-white rounded-lg shadow-lg overflow-hidden">
            <LyricEditor
              initialValue={INITIAL_CONTENT}
              onSyllableUpdate={handleSyllableUpdate}
              className="h-full"
            />
          </div>
        </div>
      </main>

      {/* Footer */}
      <footer className="bg-white border-t border-gray-200">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
          <p className="text-center text-sm text-gray-500">
            Built with CodeMirror 6, React, and Vite
          </p>
        </div>
      </footer>
    </div>
  );
}

export default App;
</file>

<file path="src/assets/react.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
</file>

<file path="src/components/ErrorDisplay.tsx">
/**
 * ErrorDisplay Component
 * 
 * Displays error messages from syllable processing in a dismissible banner.
 */

import type { ErrorDisplayProps } from '../types';

export function ErrorDisplay({
  errors,
  onDismiss,
  className = '',
}: ErrorDisplayProps) {
  if (errors.length === 0) return null;

  return (
    <div className={`error-display bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative ${className}`} role="alert">
      <strong className="font-bold">Processing Warnings:</strong>
      <div className="mt-2">
        <ul className="list-disc list-inside">
          {errors.map((error, index) => (
            <li key={index} className="text-sm">
              {error}
            </li>
          ))}
        </ul>
      </div>
      {onDismiss && (
        <button
          className="absolute top-0 bottom-0 right-0 px-4 py-3"
          onClick={onDismiss}
          aria-label="Dismiss errors"
        >
          <svg
            className="fill-current h-6 w-6 text-red-500"
            role="button"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
          >
            <title>Close</title>
            <path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z" />
          </svg>
        </button>
      )}
    </div>
  );
}
</file>

<file path="src/components/LyricEditor.tsx">
/**
 * LyricEditor Component
 * 
 * Main editor component that integrates CodeMirror with all custom extensions
 * for real-time syllable counting and lyric formatting.
 */

import { useEffect, useRef, useCallback } from 'react';
import CodeMirror from '@uiw/react-codemirror';
import type { Extension } from '@codemirror/state';
import type { EditorView } from '@codemirror/view';

// Import extensions
import { syllableGutter, syllableStateField, updateLineSyllables } from '../extensions/syllableGutter';
import { syllableDecorationsField } from '../extensions/syllableDecorations';
import { smartFormatting } from '../extensions/smartFormatting';
import { pasteHandler } from '../extensions/pasteHandler';

// Import utilities
import { getWorkerManager } from '../utils/workerManager';

// Import types
import type { LyricEditorProps } from '../types';

export function LyricEditor({
  initialValue = '',
  onChange,
  onSyllableUpdate,
  className = '',
}: LyricEditorProps) {
  const viewRef = useRef<EditorView | null>(null);
  const processingTimeoutRef = useRef<number | null>(null);

  // Set up extensions
  const extensions: Extension[] = [
    syllableStateField,
    syllableGutter,
    syllableDecorationsField,
    smartFormatting,
    pasteHandler,
  ];

  /**
   * Process a line of text for syllable counting
   */
  const processLine = useCallback(async (lineNumber: number, text: string) => {
    try {
      const workerManager = getWorkerManager();
      const data = await workerManager.processLine(text, lineNumber);

      // Update editor state with syllable data
      if (viewRef.current) {
        viewRef.current.dispatch({
          effects: updateLineSyllables(lineNumber, data),
        });
      }

      // Notify parent component
      if (onSyllableUpdate) {
        onSyllableUpdate(lineNumber, data);
      }
    } catch (error) {
      console.error(`[LyricEditor] Error processing line ${lineNumber}:`, error);
    }
  }, [onSyllableUpdate]);

  /**
   * Process all visible lines in the editor
   */
  const processVisibleLines = useCallback(() => {
    if (!viewRef.current) return;

    const { state } = viewRef.current;
    const doc = state.doc;

    // Process each line
    for (let i = 1; i <= doc.lines; i++) {
      const line = doc.line(i);
      const lineNumber = i - 1; // Convert to 0-based
      const text = line.text;

      // Skip empty lines
      if (text.trim().length === 0) continue;

      processLine(lineNumber, text);
    }
  }, [processLine]);

  /**
   * Handle document changes
   */
  const handleChange = useCallback((value: string) => {
    // Call parent onChange
    if (onChange) {
      onChange(value);
    }

    // Debounce processing
    if (processingTimeoutRef.current) {
      clearTimeout(processingTimeoutRef.current);
    }

    processingTimeoutRef.current = window.setTimeout(() => {
      processVisibleLines();
    }, 300); // 300ms debounce
  }, [onChange, processVisibleLines]);

  /**
   * Process lines on initial mount
   */
  useEffect(() => {
    const timer = setTimeout(() => {
      processVisibleLines();
    }, 100);

    return () => clearTimeout(timer);
  }, [processVisibleLines]);

  /**
   * Clean up processing timeout on unmount
   */
  useEffect(() => {
    return () => {
      if (processingTimeoutRef.current) {
        clearTimeout(processingTimeoutRef.current);
      }
    };
  }, []);

  return (
    <div className={`lyric-editor-container ${className}`}>
      <CodeMirror
        value={initialValue}
        height="100%"
        extensions={extensions}
        onChange={handleChange}
        basicSetup={{
          lineNumbers: true,
          highlightActiveLineGutter: true,
          highlightActiveLine: true,
          foldGutter: false,
          dropCursor: true,
          indentOnInput: false,
          bracketMatching: false,
          closeBrackets: false,
          autocompletion: false,
          rectangularSelection: true,
          crosshairCursor: false,
          highlightSelectionMatches: false,
          closeBracketsKeymap: false,
          searchKeymap: true,
          foldKeymap: false,
          completionKeymap: false,
          lintKeymap: false,
        }}
        onCreateEditor={(view) => {
          viewRef.current = view;
        }}
      />
    </div>
  );
}
</file>

<file path="src/extensions/pasteHandler.ts">
/**
 * Paste Handler Extension
 * 
 * Intelligently handles pasted text by:
 * - Splitting multi-line pastes into individual lines
 * - Preserving line breaks and formatting
 * - Maintaining cursor position after paste
 */

import { EditorView } from '@codemirror/view';

/**
 * Handle paste events
 */
function handlePaste(event: ClipboardEvent, view: EditorView): boolean {
  const text = event.clipboardData?.getData('text/plain');
  
  if (!text) return false;

  // Check if paste contains multiple lines
  const lines = text.split(/\r?\n/);
  
  if (lines.length <= 1) {
    // Single line paste - use default behavior
    return false;
  }

  // Multi-line paste - handle specially
  event.preventDefault();

  const { state } = view;
  const { from, to } = state.selection.main;

  // Insert the pasted text
  view.dispatch({
    changes: {
      from,
      to,
      insert: text,
    },
    selection: {
      anchor: from + text.length,
    },
  });

  return true;
}

/**
 * Paste handler extension
 */
export const pasteHandler = EditorView.domEventHandlers({
  paste: handlePaste,
});
</file>

<file path="src/extensions/smartFormatting.ts">
/**
 * Smart Formatting Extension
 * 
 * Applies visual styling to special elements in lyrics:
 * - Section headers: [Verse], [Chorus], [Bridge], etc.
 * - Chords: Text in square brackets on separate lines
 * - Comments: Lines starting with #
 */

import { Decoration, type DecorationSet, EditorView } from '@codemirror/view';
import { type Range } from '@codemirror/state';
import { ViewPlugin } from '@codemirror/view';

// Regex patterns for detection
const SECTION_HEADER_REGEX = /^\s*\[(Verse|Chorus|Bridge|Pre-Chorus|Intro|Outro|Hook|Refrain)(?:\s+\d+)?\]\s*$/i;
const CHORD_LINE_REGEX = /^\s*\[[\w\d#b/\s]+\]\s*$/;
const COMMENT_REGEX = /^#.*/;

/**
 * View plugin that manages smart formatting decorations
 */
const smartFormattingPlugin = ViewPlugin.fromClass(class {
  decorations: DecorationSet;

  constructor(view: EditorView) {
    this.decorations = this.buildDecorations(view);
  }

  update(update: import('@codemirror/view').ViewUpdate) {
    if (update.docChanged || update.viewportChanged) {
      this.decorations = this.buildDecorations(update.view);
    }
  }

  buildDecorations(view: EditorView): DecorationSet {
    const decorations: Range<Decoration>[] = [];

    // Process visible lines
    for (const { from, to } of view.visibleRanges) {
      const fromLine = view.state.doc.lineAt(from);
      const toLine = view.state.doc.lineAt(to);

      for (let lineNum = fromLine.number; lineNum <= toLine.number; lineNum++) {
        const line = view.state.doc.line(lineNum);
        const lineText = line.text;

        // Check for section header
        if (SECTION_HEADER_REGEX.test(lineText)) {
          decorations.push(
            Decoration.line({ class: 'cm-section-header' }).range(line.from)
          );
        }
        // Check for chord line
        else if (CHORD_LINE_REGEX.test(lineText)) {
          decorations.push(
            Decoration.line({ class: 'cm-chord-line' }).range(line.from)
          );
        }
        // Check for comment
        else if (COMMENT_REGEX.test(lineText)) {
          decorations.push(
            Decoration.line({ class: 'cm-comment-line' }).range(line.from)
          );
        }
      }
    }

    return Decoration.set(decorations, true);
  }
}, {
  decorations: v => v.decorations,
});

/**
 * Extension for smart formatting
 */
export const smartFormatting = [
  smartFormattingPlugin,
];
</file>

<file path="src/extensions/syllableDecorations.ts">
/**
 * Syllable Decorations Extension
 * 
 * Displays inline markers (•) between syllables within words.
 * Integrates with syllable state to show visual syllable boundaries.
 */

import { Decoration, type DecorationSet, EditorView, WidgetType } from '@codemirror/view';
import { StateField, RangeSetBuilder } from '@codemirror/state';
import { syllableStateField, updateSyllableEffect } from './syllableGutter';
import type { SyllableData } from '../types';

/**
 * Widget for displaying syllable markers
 */
class SyllableMarkerWidget extends WidgetType {
  toDOM(): HTMLElement {
    const span = document.createElement('span');
    span.className = 'syllable-marker';
    span.textContent = '•';
    span.setAttribute('aria-hidden', 'true');
    return span;
  }

  eq(): boolean {
    return true; // All syllable markers are identical
  }

  ignoreEvent(): boolean {
    return true; // Don't interfere with editing
  }
}

/**
 * Create decorations for syllable markers on a line
 */
function createLineDecorations(
  view: EditorView,
  lineNumber: number,
  data: SyllableData
): Array<{ from: number; decoration: Decoration }> {
  const decorations: Array<{ from: number; decoration: Decoration }> = [];
  const doc = view.state.doc;
  
  // Get the line (CodeMirror uses 1-based line numbers)
  const line = doc.line(lineNumber + 1);
  const lineText = line.text;
  
  // Find each word and add syllable markers
  const wordRegex = /\S+/g;
  let match: RegExpExecArray | null;
  
  while ((match = wordRegex.exec(lineText)) !== null) {
    const wordIndex = data.words.findIndex(w => w.word === match![0]);
    
    if (wordIndex === -1) continue;
    
    const wordData = data.words[wordIndex];
    
    // Only add markers for words with syllable boundaries
    if (!wordData.success || wordData.positions.length === 0) continue;
    
    // Add marker after each syllable boundary
    for (const position of wordData.positions) {
      const absolutePos = line.from + match.index + position;
      
      // Create inline widget decoration
      const decoration = Decoration.widget({
        widget: new SyllableMarkerWidget(),
        side: 0, // Place at the position
      });
      
      decorations.push({ from: absolutePos, decoration });
    }
  }
  
  return decorations;
}

/**
 * State field for syllable decorations
 */
export const syllableDecorationsField = StateField.define<DecorationSet>({
  create(): DecorationSet {
    return Decoration.none;
  },

  update(decorations, transaction): DecorationSet {
    // Map existing decorations through document changes
    decorations = decorations.map(transaction.changes);

    // Check if syllable data was updated
    const syllableUpdates = transaction.effects.filter(e => e.is(updateSyllableEffect));
    
    if (syllableUpdates.length > 0) {
      const syllableState = transaction.state.field(syllableStateField, false);
      if (!syllableState) return decorations;

      // Build new decoration set
      const builder = new RangeSetBuilder<Decoration>();
      
      // Add decorations for all updated lines
      for (const effect of syllableUpdates) {
        const { lineNumber, data } = effect.value;
        const lineDecorations = createLineDecorations(
          { state: transaction.state } as EditorView,
          lineNumber,
          data
        );
        
        // Sort by position and add to builder
        lineDecorations.sort((a, b) => a.from - b.from);
        for (const { from, decoration } of lineDecorations) {
          builder.add(from, from, decoration);
        }
      }

      decorations = builder.finish();
    }

    return decorations;
  },

  provide: f => EditorView.decorations.from(f),
});

/**
 * Extension array for syllable decorations
 */
export const syllableDecorations = [
  syllableDecorationsField,
];
</file>

<file path="src/extensions/syllableGutter.ts">
/**
 * Syllable Gutter Extension
 * 
 * Custom CodeMirror gutter that displays syllable counts for each line.
 * Integrates with the syllable state to show real-time syllable counts.
 */

import { gutter, GutterMarker } from '@codemirror/view';
import { StateField, StateEffect, type EditorState } from '@codemirror/state';
import type { SyllableData, SyllableState, SyllableUpdateEffect } from '../types';

/**
 * Effect for updating syllable data for a specific line
 */
export const updateSyllableEffect = StateEffect.define<SyllableUpdateEffect>();

/**
 * State field that stores syllable data for all lines
 */
export const syllableStateField = StateField.define<SyllableState>({
  create(): SyllableState {
    return {
      lines: new Map(),
      lastUpdate: Date.now(),
    };
  },

  update(state, transaction): SyllableState {
    let newState = state;

    // Process syllable update effects
    for (const effect of transaction.effects) {
      if (effect.is(updateSyllableEffect)) {
        const { lineNumber, data } = effect.value;
        const newLines = new Map(newState.lines);
        newLines.set(lineNumber, data);
        
        newState = {
          lines: newLines,
          lastUpdate: Date.now(),
        };
      }
    }

    // Clear syllable data for deleted lines
    if (transaction.docChanged) {
      const newLines = new Map<number, SyllableData>();
      const doc = transaction.newDoc;
      
      // Only keep syllable data for lines that still exist
      newState.lines.forEach((data, lineNum) => {
        if (lineNum < doc.lines) {
          newLines.set(lineNum, data);
        }
      });

      if (newLines.size !== newState.lines.size) {
        newState = {
          lines: newLines,
          lastUpdate: Date.now(),
        };
      }
    }

    return newState;
  },
});

/**
 * Gutter marker for displaying syllable counts
 */
class SyllableGutterMarker extends GutterMarker {
  count: number;
  hasErrors: boolean;

  constructor(count: number, hasErrors: boolean) {
    super();
    this.count = count;
    this.hasErrors = hasErrors;
  }

  toDOM(): HTMLElement {
    const dom = document.createElement('div');
    dom.className = `syllable-count${this.hasErrors ? ' has-errors' : ''}`;
    dom.textContent = this.count.toString();
    dom.title = this.hasErrors 
      ? `${this.count} syllables (some words failed to process)` 
      : `${this.count} syllables`;
    return dom;
  }
}

/**
 * Get syllable data for a specific line
 */
function getSyllableData(state: EditorState, lineNumber: number): SyllableData | null {
  const syllableState = state.field(syllableStateField, false);
  if (!syllableState) return null;
  return syllableState.lines.get(lineNumber) ?? null;
}

/**
 * Syllable gutter extension
 */
export const syllableGutter = gutter({
  class: 'cm-syllable-gutter',
  
  lineMarker(view, line) {
    const lineNumber = view.state.doc.lineAt(line.from).number - 1; // Convert to 0-based
    const data = getSyllableData(view.state, lineNumber);
    
    if (!data) return null;
    
    // Don't show marker for empty lines
    if (data.totalSyllables === 0) return null;
    
    const hasErrors = Boolean(data.errors && data.errors.length > 0);
    return new SyllableGutterMarker(data.totalSyllables, hasErrors);
  },

  lineMarkerChange(update) {
    // Re-render gutter if syllable state changed or document changed
    return update.docChanged || 
           update.transactions.some(tr => tr.effects.some(e => e.is(updateSyllableEffect)));
  },
});

/**
 * Helper to update syllable data for a line
 */
export function updateLineSyllables(lineNumber: number, data: SyllableData) {
  return updateSyllableEffect.of({ lineNumber, data });
}

/**
 * Helper to get syllable state from editor
 */
export function getSyllableState(state: EditorState): SyllableState | null {
  return state.field(syllableStateField, false) ?? null;
}
</file>

<file path="src/index.css">
/* Import Tailwind CSS v4 */
@import "tailwindcss";

/* Custom theme variables for Cadence */
@theme {
  /* Custom font for lyrics (clean, readable) */
  --font-lyric: ui-sans-serif, system-ui, sans-serif;
  
  /* Custom colors for syllable markers and gutters */
  --color-syllable-marker: oklch(0.7 0.15 240);
  --color-gutter-text: oklch(0.5 0 0);
  --color-gutter-bg: oklch(0.98 0 0);
  
  /* Custom spacing for editor */
  --spacing-editor-padding: 1rem;
}

/* Editor Container Styles */
.lyric-editor-container {
  height: 100%;
  width: 100%;
}

.lyric-editor-container .cm-editor {
  height: 100%;
  font-family: 'Courier New', Courier, monospace;
  font-size: 14px;
  line-height: 1.6;
}

.lyric-editor-container .cm-scroller {
  overflow: auto;
  font-family: inherit;
}

/* Syllable Gutter Styles */
.cm-syllable-gutter {
  min-width: 3rem;
  padding: 0 0.5rem;
  background: var(--color-gutter-bg);
  border-right: 1px solid oklch(0.9 0 0);
}

.syllable-count {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 2rem;
  padding: 0.125rem 0.25rem;
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--color-gutter-text);
  background: oklch(0.95 0 0);
  border-radius: 0.25rem;
}

.syllable-count.has-errors {
  background: oklch(0.95 0.08 25);
  color: oklch(0.5 0.15 25);
}

/* Syllable Marker Styles */
.syllable-marker {
  color: var(--color-syllable-marker);
  font-weight: bold;
  margin: 0 1px;
  user-select: none;
  pointer-events: none;
}

/* Smart Formatting Styles */
.cm-section-header {
  font-weight: bold;
  color: oklch(0.4 0.15 260);
  background: oklch(0.97 0.05 260);
  padding-left: 0.5rem;
  border-left: 3px solid oklch(0.6 0.2 260);
}

.cm-chord-line {
  font-style: italic;
  color: oklch(0.45 0.12 30);
  background: oklch(0.97 0.03 30);
}

.cm-comment-line {
  color: oklch(0.6 0 0);
  font-style: italic;
  opacity: 0.7;
}

/* Active Line Highlighting */
.cm-activeLine {
  background-color: oklch(0.98 0 0) !important;
}

.cm-activeLineGutter {
  background-color: oklch(0.95 0 0) !important;
}

/* Selection Styles */
.cm-selectionBackground {
  background-color: oklch(0.85 0.1 240) !important;
}

/* Cursor */
.cm-cursor {
  border-left-color: oklch(0.3 0 0);
}

/* Focused Editor */
.cm-focused .cm-selectionBackground {
  background-color: oklch(0.80 0.12 240) !important;
}
</file>

<file path="src/main.tsx">
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)
</file>

<file path="src/types/index.ts">
/**
 * Type definitions for Cadence - Real-time Lyric Syllable Analyzer
 */

// ============================================================================
// Worker Message Types
// ============================================================================

/**
 * Request sent to the syllable processing worker
 */
export interface WorkerRequest {
  /** Unique identifier for this request */
  id: number;
  /** Type of operation to perform */
  type: 'process-line';
  /** The text content to process */
  text: string;
  /** Line number in the document (0-based) */
  lineNumber: number;
}

/**
 * Response received from the syllable processing worker
 */
export interface WorkerResponse {
  /** Request ID this response corresponds to */
  id: number;
  /** Type of response */
  type: 'line-result' | 'error';
  /** Line number processed (0-based) */
  lineNumber: number;
  /** Syllable data for the line */
  data?: SyllableData;
  /** Error message if processing failed */
  error?: string;
}

// ============================================================================
// Syllable Processing Types
// ============================================================================

/**
 * Syllable information for a single word
 */
export interface WordSyllables {
  /** The original word text */
  word: string;
  /** Number of syllables detected */
  count: number;
  /** Positions of syllable boundaries (character indices) */
  positions: number[];
  /** Whether syllable detection succeeded */
  success: boolean;
  /** Error message if detection failed */
  error?: string;
}

/**
 * Complete syllable data for a line of text
 */
export interface SyllableData {
  /** Total syllable count for the line */
  totalSyllables: number;
  /** Syllable data for each word */
  words: WordSyllables[];
  /** Whether the entire line was successfully processed */
  success: boolean;
  /** Any warnings or errors encountered */
  errors?: string[];
}

// ============================================================================
// CodeMirror Extension Types
// ============================================================================

/**
 * State field value storing syllable data for all lines
 */
export interface SyllableState {
  /** Map of line number to syllable data */
  lines: Map<number, SyllableData>;
  /** Timestamp of last update */
  lastUpdate: number;
}

/**
 * Transaction effect for updating syllable data
 */
export interface SyllableUpdateEffect {
  /** Line number to update */
  lineNumber: number;
  /** New syllable data for the line */
  data: SyllableData;
}

// ============================================================================
// UI Component Types
// ============================================================================

/**
 * Props for the main LyricEditor component
 */
export interface LyricEditorProps {
  /** Initial content to display */
  initialValue?: string;
  /** Callback when content changes */
  onChange?: (value: string) => void;
  /** Callback when syllable data updates */
  onSyllableUpdate?: (lineNumber: number, data: SyllableData) => void;
  /** CSS class name for the editor container */
  className?: string;
}

/**
 * Props for the ErrorDisplay component
 */
export interface ErrorDisplayProps {
  /** Array of error messages to display */
  errors: string[];
  /** Callback when errors are dismissed */
  onDismiss?: () => void;
  /** CSS class name for the error container */
  className?: string;
}

// ============================================================================
// Editor Configuration Types
// ============================================================================

/**
 * Configuration for the syllable gutter
 */
export interface GutterConfig {
  /** Width of the gutter in pixels */
  width?: number;
  /** Whether to show zero counts */
  showZero?: boolean;
  /** Custom CSS class for gutter elements */
  className?: string;
}

/**
 * Configuration for syllable decorations
 */
export interface DecorationConfig {
  /** Character to use for syllable markers */
  marker?: string;
  /** CSS class for marker elements */
  markerClass?: string;
  /** Whether to show markers on hover only */
  hoverOnly?: boolean;
}

/**
 * Configuration for smart formatting
 */
export interface FormattingConfig {
  /** Enable section header detection ([Verse], [Chorus], etc.) */
  enableHeaders?: boolean;
  /** Enable chord detection (text in square brackets on separate lines) */
  enableChords?: boolean;
  /** Enable comment detection (lines starting with #) */
  enableComments?: boolean;
  /** Custom regex patterns for detection */
  customPatterns?: RegExp[];
}

/**
 * Complete editor configuration
 */
export interface EditorConfig {
  gutter?: GutterConfig;
  decorations?: DecorationConfig;
  formatting?: FormattingConfig;
}
</file>

<file path="src/utils/workerManager.ts">
/**
 * Worker Manager
 * 
 * Manages communication with the syllable processor Web Worker.
 * Provides a promise-based API for processing text lines.
 */

import type { WorkerRequest, WorkerResponse, SyllableData } from '../types';

export class WorkerManager {
  private worker: Worker;
  private requestId: number = 0;
  private pendingRequests: Map<number, {
    resolve: (data: SyllableData) => void;
    reject: (error: Error) => void;
  }> = new Map();

  constructor() {
    // Create the Web Worker using Vite's special syntax
    this.worker = new Worker(
      new URL('./syllableProcessor.worker.ts', import.meta.url),
      { type: 'module' }
    );

    // Set up message handler
    this.worker.onmessage = (event: MessageEvent<WorkerResponse>) => {
      this.handleResponse(event.data);
    };

    // Set up error handler
    this.worker.onerror = (error) => {
      console.error('[WorkerManager] Worker error:', error);
      // Reject all pending requests
      this.pendingRequests.forEach(({ reject }) => {
        reject(new Error('Worker encountered an error'));
      });
      this.pendingRequests.clear();
    };
  }

  /**
   * Process a line of text and return syllable data
   */
  processLine(text: string, lineNumber: number): Promise<SyllableData> {
    return new Promise((resolve, reject) => {
      const id = this.requestId++;
      
      // Store promise handlers
      this.pendingRequests.set(id, { resolve, reject });

      // Send request to worker
      const request: WorkerRequest = {
        id,
        type: 'process-line',
        text,
        lineNumber,
      };

      try {
        this.worker.postMessage(request);
      } catch (error) {
        this.pendingRequests.delete(id);
        reject(error instanceof Error ? error : new Error('Failed to send message to worker'));
      }
    });
  }

  /**
   * Handle response from worker
   */
  private handleResponse(response: WorkerResponse): void {
    const pending = this.pendingRequests.get(response.id);
    
    if (!pending) {
      console.warn('[WorkerManager] Received response for unknown request:', response.id);
      return;
    }

    this.pendingRequests.delete(response.id);

    if (response.type === 'error') {
      pending.reject(new Error(response.error || 'Unknown worker error'));
    } else if (response.type === 'line-result' && response.data) {
      pending.resolve(response.data);
    } else {
      pending.reject(new Error('Invalid response from worker'));
    }
  }

  /**
   * Terminate the worker and clean up
   */
  terminate(): void {
    this.worker.terminate();
    
    // Reject all pending requests
    this.pendingRequests.forEach(({ reject }) => {
      reject(new Error('Worker was terminated'));
    });
    this.pendingRequests.clear();
  }

  /**
   * Get the number of pending requests
   */
  getPendingCount(): number {
    return this.pendingRequests.size;
  }
}

// Export singleton instance
let workerManagerInstance: WorkerManager | null = null;

/**
 * Get or create the singleton worker manager instance
 */
export function getWorkerManager(): WorkerManager {
  if (!workerManagerInstance) {
    workerManagerInstance = new WorkerManager();
  }
  return workerManagerInstance;
}

/**
 * Clean up the worker manager (useful for hot module replacement)
 */
export function cleanupWorkerManager(): void {
  if (workerManagerInstance) {
    workerManagerInstance.terminate();
    workerManagerInstance = null;
  }
}
</file>

<file path="src/workers/syllableProcessor.worker.ts">
/**
 * Syllable Processor Web Worker
 * 
 * Processes text using the hyphen library to count syllables without blocking the main thread.
 * Uses Franklin Liang's hyphenation algorithm to detect syllable boundaries.
 */

import { hyphenateSync } from 'hyphen/en';
import type { WorkerRequest, WorkerResponse, SyllableData, WordSyllables } from '../types';

/**
 * Process a single word to count syllables
 */
function processWord(word: string): WordSyllables {
  try {
    // Clean the word: remove punctuation but preserve apostrophes
    const cleaned = word.replace(/[^\w']/g, '');
    
    if (!cleaned) {
      return {
        word,
        count: 0,
        positions: [],
        success: true,
      };
    }

    // Get hyphenated version (soft hyphens: \u00AD)
    const hyphenated = hyphenateSync(cleaned);
    
    // Split on soft hyphens to get syllables
    const syllables = hyphenated.split('\u00AD');
    
    // Calculate positions of syllable boundaries
    const positions: number[] = [];
    let pos = 0;
    for (let i = 0; i < syllables.length - 1; i++) {
      pos += syllables[i].length;
      positions.push(pos);
    }

    return {
      word,
      count: syllables.length,
      positions,
      success: true,
    };
  } catch (error) {
    return {
      word,
      count: 0,
      positions: [],
      success: false,
      error: error instanceof Error ? error.message : 'Unknown error',
    };
  }
}

/**
 * Process an entire line of text
 */
function processLine(text: string): SyllableData {
  // Split line into words (preserve whitespace info for positioning)
  const wordRegex = /\S+/g;
  const matches = Array.from(text.matchAll(wordRegex));
  
  const words: WordSyllables[] = matches.map(match => processWord(match[0]));
  
  const totalSyllables = words.reduce((sum, w) => sum + w.count, 0);
  const errors = words
    .filter(w => !w.success && w.error)
    .map(w => `"${w.word}": ${w.error}`);

  return {
    totalSyllables,
    words,
    success: errors.length === 0,
    errors: errors.length > 0 ? errors : undefined,
  };
}

/**
 * Handle messages from the main thread
 */
self.onmessage = (event: MessageEvent<WorkerRequest>) => {
  const request = event.data;

  try {
    if (request.type === 'process-line') {
      const data = processLine(request.text);
      
      const response: WorkerResponse = {
        id: request.id,
        type: 'line-result',
        lineNumber: request.lineNumber,
        data,
      };
      
      self.postMessage(response);
    }
  } catch (error) {
    const response: WorkerResponse = {
      id: request.id,
      type: 'error',
      lineNumber: request.lineNumber,
      error: error instanceof Error ? error.message : 'Unknown error',
    };
    
    self.postMessage(response);
  }
};

// Log when worker is ready
console.log('[Worker] Syllable processor worker loaded');
</file>

<file path="tsconfig.app.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable", "WebWorker"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}
</file>

<file path="tsconfig.json">
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}
</file>

<file path="tsconfig.node.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="vite.config.ts">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import tailwindcss from '@tailwindcss/vite'

// https://vite.dev/config/
export default defineConfig({
  plugins: [
    tailwindcss(),
    react(),
  ],
})
</file>

</files>
